(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{270:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return i})),n.d(t,"default",(function(){return o}));var a=n(3),l=n(7),b=(n(0),n(467)),r={title:"92. \u7cbe\u8bfb\u300aReact PowerPlug \u6e90\u7801\u300b",id:"092",hide_title:!0},c={unversionedId:"092",id:"092",isDocsHomePage:!1,title:"92. \u7cbe\u8bfb\u300aReact PowerPlug \u6e90\u7801\u300b",description:"1. \u5f15\u8a00",source:"@site/weekly/092.\u7cbe\u8bfb\u300aReact PowerPlug \u6e90\u7801\u300b.md",slug:"/092",permalink:"/weekly/092",editUrl:"https://github.com/coder-study-room/Front-end-Advanced-Route/edit/master/weekly/092.\u7cbe\u8bfb\u300aReact PowerPlug \u6e90\u7801\u300b.md",version:"current",lastUpdatedBy:"wangweidong",lastUpdatedAt:1617879406,formattedLastUpdatedAt:"4/8/2021",sidebar:"weekly",previous:{title:"91. \u7cbe\u8bfb\u300a\u6b63\u5219 ES2018\u300b",permalink:"/weekly/091"},next:{title:"93. \u7cbe\u8bfb\u300asyntax-parser \u6e90\u7801\u300b",permalink:"/weekly/093"}},i=[{value:"1. \u5f15\u8a00",id:"1-\u5f15\u8a00",children:[]},{value:"2. \u7cbe\u8bfb",id:"2-\u7cbe\u8bfb",children:[{value:"2.1. Value",id:"21-value",children:[]},{value:"2.2. Toggle",id:"22-toggle",children:[]},{value:"2.3. Counter",id:"23-counter",children:[]},{value:"2.4. List",id:"24-list",children:[]},{value:"2.5. Set",id:"25-set",children:[]},{value:"2.6. map",id:"26-map",children:[]},{value:"2.7. state",id:"27-state",children:[]},{value:"2.8. Active",id:"28-active",children:[]},{value:"2.9. Focus",id:"29-focus",children:[]},{value:"2.10. FocusManager",id:"210-focusmanager",children:[]},{value:"2.11. Hover",id:"211-hover",children:[]},{value:"2.12. Touch",id:"212-touch",children:[]},{value:"2.13. Field",id:"213-field",children:[]},{value:"2.14. Form",id:"214-form",children:[]},{value:"2.15. Interval",id:"215-interval",children:[]},{value:"2.16. Compose",id:"216-compose",children:[]}]},{value:"3. \u603b\u7ed3",id:"3-\u603b\u7ed3",children:[]}],p={toc:i};function o(e){var t=e.components,n=Object(l.a)(e,["components"]);return Object(b.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(b.b)("h2",{id:"1-\u5f15\u8a00"},"1. \u5f15\u8a00"),Object(b.b)("p",null,Object(b.b)("a",{parentName:"p",href:"https://github.com/renatorib/react-powerplug"},"React PowerPlug")," \u662f\u5229\u7528 render props \u8fdb\u884c\u66f4\u597d\u72b6\u6001\u7ba1\u7406\u7684\u5de5\u5177\u5e93\u3002"),Object(b.b)("p",null,"React \u9879\u76ee\u4e2d\uff0c\u4e00\u822c\u4e00\u4e2a\u6587\u4ef6\u5c31\u662f\u4e00\u4e2a\u7c7b\uff0c\u72b6\u6001\u6700\u7ec6\u7c92\u5ea6\u5c31\u662f\u6587\u4ef6\u7684\u7c92\u5ea6\u3002",Object(b.b)("strong",{parentName:"p"},"\u7136\u800c\u6587\u4ef6\u7c92\u5ea6\u5e76\u975e\u72b6\u6001\u7ba1\u7406\u6700\u5408\u9002\u7684\u7c92\u5ea6\uff0c\u6240\u4ee5\u6709\u4e86 Redux \u4e4b\u7c7b\u7684\u5168\u5c40\u72b6\u6001\u5e93\u3002")),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u540c\u6837\uff0c\u6587\u4ef6\u7c92\u5ea6\u4e5f\u5e76\u975e\u72b6\u6001\u7ba1\u7406\u7684\u6700\u7ec6\u7c92\u5ea6\uff0c\u66f4\u7ec6\u7684\u7c92\u5ea6\u6216\u8bb8\u66f4\u5408\u9002\uff0c\u56e0\u6b64\u6709\u4e86 React PowerPlug\u3002")),Object(b.b)("p",null,"\u6bd4\u5982\u4f60\u4f1a\u5728\u9879\u76ee\u4e2d\u770b\u5230\u8fd9\u79cd\u773c\u82b1\u7f2d\u4e71\u7684 ",Object(b.b)("inlineCode",{parentName:"p"},"state"),":"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},'class App extends React.PureComponent {\n  state = {\n    name: 1,\n    isLoading: false,\n    isFetchUser: false,\n    data: {},\n    disableInput: false,\n    validate: false,\n    monacoInputValue: "",\n    value: ""\n  };\n\n  render() {\n    /**/\n  }\n}\n')),Object(b.b)("p",null,"\u5176\u5b9e\u771f\u6b63 ",Object(b.b)("inlineCode",{parentName:"p"},"App")," \u7ea7\u522b\u7684\u72b6\u6001\u5e76\u6ca1\u6709\u90a3\u4e48\u591a\uff0c\u5f88\u591a ",Object(b.b)("strong",{parentName:"p"},"\u8bf8\u5982\u53d7\u63a7\u7ec4\u4ef6 ",Object(b.b)("inlineCode",{parentName:"strong"},"onChange")," \u4e34\u65f6\u4fdd\u5b58\u7684\u65e0\u610f\u4e49 Value \u627e\u4e0d\u5230\u5408\u9002\u7684\u5730\u65b9\u5b58\u50a8\u3002")),Object(b.b)("p",null,"\u8fd9\u65f6\u5019\u53ef\u4ee5\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"Value")," \u7ba1\u7406\u5c40\u90e8\u72b6\u6001\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Value initial="React">\n  {({ value, set, reset }) => (\n    <>\n      <Select\n        label="Choose one"\n        options={["React", "Preact", "Vue"]}\n        value={value}\n        onChange={set}\n      />\n      <Button onClick={reset}>Reset to initial</Button>\n    </>\n  )}\n</Value>\n')),Object(b.b)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2a\u95ee\u9898\u672c\u8d28\u4e0a\u5e94\u8be5\u62c6\u6210\u65b0\u7684 React \u7c7b\u89e3\u51b3\uff0c\u4f46\u8fd9\u4e5f\u8bb8\u4f1a\u5bfc\u81f4\u9879\u76ee\u7ed3\u6784\u66f4\u6df7\u4e71\uff0c\u56e0\u6b64 RenderProps \u8fd8\u662f\u5fc5\u4e0d\u53ef\u5c11\u7684\u3002"),Object(b.b)("p",null,"\u4eca\u5929\u6211\u4eec\u5c31\u6765\u89e3\u8bfb\u4e00\u4e0b React PowerPlug \u7684\u6e90\u7801\u3002"),Object(b.b)("h2",{id:"2-\u7cbe\u8bfb"},"2. \u7cbe\u8bfb"),Object(b.b)("h3",{id:"21-value"},"2.1. Value"),Object(b.b)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u503c\u64cd\u4f5c\u7684\u5de5\u5177\uff0c\u529f\u80fd\u4e0e Hooks \u4e2d ",Object(b.b)("inlineCode",{parentName:"p"},"useState")," \u7c7b\u4f3c\uff0c\u4e0d\u8fc7\u591a\u4e86\u4e00\u4e2a ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u529f\u80fd\uff08Hooks \u5176\u5b9e\u4e5f\u672a\u5c1d\u4e0d\u80fd\u6709\uff0c\u4f46 Hooks \u786e\u5b9e\u6ca1\u6709 Reset\uff09\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Value initial="React">\n  {({ value, set, reset }) => (\n    <>\n      <Select\n        label="Choose one"\n        options={["React", "Preact", "Vue"]}\n        value={value}\n        onChange={set}\n      />\n      <Button onClick={reset}>Reset to initial</Button>\n    </>\n  )}\n</Value>\n')),Object(b.b)("h4",{id:"\u6e90\u7801"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Value.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1a\u65e0")),Object(b.b)("p",null,"State \u53ea\u5b58\u50a8\u4e00\u4e2a\u5c5e\u6027 ",Object(b.b)("inlineCode",{parentName:"p"},"value"),"\uff0c\u5e76\u8d4b\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"initial"),":"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  state = {\n    value: this.props.initial\n  };\n}\n")),Object(b.b)("p",null,"\u65b9\u6cd5\u6709 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," ",Object(b.b)("inlineCode",{parentName:"p"},"reset"),"\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"set")," \u56de\u8c03\u51fd\u6570\u89e6\u53d1\u540e\u8c03\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"setState")," \u66f4\u65b0 ",Object(b.b)("inlineCode",{parentName:"p"},"value"),"\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u5c31\u662f\u8c03\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," \u5e76\u4f20\u5165 ",Object(b.b)("inlineCode",{parentName:"p"},"this.props.initial")," \u5373\u53ef\u3002"),Object(b.b)("h3",{id:"22-toggle"},"2.2. Toggle"),Object(b.b)("p",null,"Toggle \u662f\u6700\u76f4\u63a5\u5229\u7528 Value \u5373\u53ef\u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u56e0\u6b64\u653e\u5728 Value \u4e4b\u540e\u8bf4\u3002Toggle \u503c\u662f boolean \u7c7b\u578b\uff0c\u7279\u522b\u9002\u5408\u914d\u5408 Switch \u7b49\u7ec4\u4ef6\u3002"),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"\u65e2\u7136 Toggle \u529f\u80fd\u5f31\u4e8e Value\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u7528 Value \u66ff\u4ee3 Toggle \u5462\uff1f\u8fd9\u662f\u4e2a\u597d\u95ee\u9898\uff0c\u5982\u679c\u4f60\u4e0d\u62c5\u5fc3\u81ea\u5df1\u4ee3\u7801\u53ef\u8bfb\u6027\u7684\u8bdd\uff0c\u7684\u786e\u53ef\u4ee5\u6c38\u8fdc\u4e0d\u7528 Toggle\u3002")),Object(b.b)("h4",{id:"\u7528\u6cd5-1"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},"<Toggle initial={false}>\n  {({ on, toggle }) => <Checkbox onClick={toggle} checked={on} />}\n</Toggle>\n")),Object(b.b)("h4",{id:"\u6e90\u7801-1"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Toggle.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u6838\u5fc3\u5c31\u662f\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"on"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"toggle")," \u65b9\u6cd5\uff0c\u7ee7\u627f ",Object(b.b)("inlineCode",{parentName:"p"},"set")," ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  toggle: () => set(on => !on);\n}\n")),Object(b.b)("p",null,"\u7406\u6240\u56e0\u5f53\uff0c\u5c06 value \u503c\u9650\u5b9a\u5728 boolean \u8303\u56f4\u5185\u3002"),Object(b.b)("h3",{id:"23-counter"},"2.3. Counter"),Object(b.b)("p",null,"\u4e0e Toggle \u7c7b\u4f3c\uff0c\u8fd9\u4e5f\u662f\u7ee7\u627f\u4e86 Value \u5c31\u53ef\u4ee5\u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u8ba1\u6570\u5668\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-2"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Counter initial={0}>\n  {({ count, inc, dec }) => (\n    <CartItem\n      productName="Lorem ipsum"\n      unitPrice={19.9}\n      count={count}\n      onAdd={inc}\n      onRemove={dec}\n    />\n  )}\n</Counter>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-2"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Counter.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"count"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"inc")," ",Object(b.b)("inlineCode",{parentName:"p"},"dec")," ",Object(b.b)("inlineCode",{parentName:"p"},"incBy")," ",Object(b.b)("inlineCode",{parentName:"p"},"decBy")," \u65b9\u6cd5\uff0c\u7ee7\u627f ",Object(b.b)("inlineCode",{parentName:"p"},"set")," ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,"\u4e0e Toggle \u7c7b\u4f3c\uff0cCounter \u5c06 value \u9650\u5b9a\u5728\u4e86\u6570\u5b57\uff0c\u90a3\u4e48\u6bd4\u5982 ",Object(b.b)("inlineCode",{parentName:"p"},"inc")," \u5c31\u4f1a\u8fd9\u4e48\u5b9e\u73b0\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  inc: () => set(value => value + 1);\n}\n")),Object(b.b)("p",null,"\u8fd9\u91cc\u7528\u5230\u4e86 Value \u7ec4\u4ef6 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," \u51fd\u6570\u7684\u591a\u6001\u7528\u6cd5\u3002\u4e00\u822c set \u7684\u53c2\u6570\u662f\u4e00\u4e2a\u503c\uff0c\u4f46\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u56de\u8c03\u662f\u5f53\u524d\u7684\u503c\uff0c\u8fd9\u91cc\u8fd4\u56de\u4e00\u4e2a +1 \u7684\u65b0\u503c\u3002"),Object(b.b)("h3",{id:"24-list"},"2.4. List"),Object(b.b)("p",null,"\u64cd\u4f5c\u6570\u7ec4\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-3"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},"<List initial={['#react', '#babel']}>\n  {({ list, pull, push }) => (\n    <div>\n      <FormInput onSubmit={push} />\n      {list.map({ tag }) => (\n        <Tag onRemove={() => pull(value => value === tag)}>\n          {tag}\n        </Tag>\n      )}\n    </div>\n  )}\n</List>\n")),Object(b.b)("h4",{id:"\u6e90\u7801-3"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/List.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"list"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"first")," ",Object(b.b)("inlineCode",{parentName:"p"},"last")," ",Object(b.b)("inlineCode",{parentName:"p"},"push")," ",Object(b.b)("inlineCode",{parentName:"p"},"pull")," ",Object(b.b)("inlineCode",{parentName:"p"},"sort")," \u65b9\u6cd5\uff0c\u7ee7\u627f ",Object(b.b)("inlineCode",{parentName:"p"},"set")," ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\u3002"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  list: value,\n  first: () => value[0],\n  last: () => value[Math.max(0, value.length - 1)],\n  set: list => set(list),\n  push: (...values) => set(list => [...list, ...values]),\n  pull: predicate => set(list => list.filter(complement(predicate))),\n  sort: compareFn => set(list => [...list].sort(compareFn)),\n  reset\n};\n")),Object(b.b)("p",null,"\u4e3a\u4e86\u5229\u7528 React Immutable \u66f4\u65b0\u7684\u7279\u6027\uff0c\u56e0\u6b64\u5c06 ",Object(b.b)("inlineCode",{parentName:"p"},"sort")," \u51fd\u6570\u7531 Mutable \u4fee\u6b63\u4e3a Immutable\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"push")," ",Object(b.b)("inlineCode",{parentName:"p"},"pull")," \u540c\u7406\u3002"),Object(b.b)("h3",{id:"25-set"},"2.5. Set"),Object(b.b)("p",null,"\u5b58\u50a8\u6570\u7ec4\u5bf9\u8c61\uff0c\u53ef\u4ee5\u6dfb\u52a0\u548c\u5220\u9664\u5143\u7d20\u3002\u7c7b\u4f3c ES6 Set\u3002\u548c List \u76f8\u6bd4\u5c11\u4e86\u8bb8\u591a\u529f\u80fd\u51fd\u6570\uff0c\u56e0\u6b64\u53ea\u627f\u62c5\u6dfb\u52a0\u3001\u5220\u9664\u5143\u7d20\u7684\u7b80\u5355\u529f\u80fd\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-4"},"\u7528\u6cd5"),Object(b.b)("p",null,"\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"initial")," \u662f\u6570\u7ec4\uff0c\u800c\u4e0d\u662f Set \u5bf9\u8c61\u3002"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Set initial={["react", "babel"]}>\n  {({ values, remove, add }) => (\n    <TagManager>\n      <FormInput onSubmit={add} />\n      {values.map(tag => (\n        <Tag onRemove={() => remove(tag)}>{tag}</Tag>\n      ))}\n    </TagManager>\n  )}\n</Set>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-4"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Set.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"values")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"[]"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"add")," ",Object(b.b)("inlineCode",{parentName:"p"},"remove")," ",Object(b.b)("inlineCode",{parentName:"p"},"clear")," ",Object(b.b)("inlineCode",{parentName:"p"},"has")," \u65b9\u6cd5\uff0c\u4fdd\u7559 ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,"\u5b9e\u73b0\u4f9d\u7136\u5f88\u7b80\u5355\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"add")," ",Object(b.b)("inlineCode",{parentName:"p"},"remove")," ",Object(b.b)("inlineCode",{parentName:"p"},"clear")," \u90fd\u5229\u7528 Value \u63d0\u4f9b\u7684 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," \u8fdb\u884c\u8d4b\u503c\uff0c\u53ea\u8981\u5b9e\u73b0\u51e0\u4e2a\u64cd\u4f5c\u6570\u7ec4\u65b9\u6cd5\u5373\u53ef\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"const unique = arr => arr.filter((d, i) => arr.indexOf(d) === i);\nconst hasItem = (arr, item) => arr.indexOf(item) !== -1;\nconst removeItem = (arr, item) =>\n  hasItem(arr, item) ? arr.filter(d => d !== item) : arr;\nconst addUnique = (arr, item) => (hasItem(arr, item) ? arr : [...arr, item]);\n")),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"has")," \u65b9\u6cd5\u5219\u76f4\u63a5\u590d\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"hasItem"),"\u3002\u6838\u5fc3\u8fd8\u662f\u5229\u7528 Value \u7684 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," \u51fd\u6570\u4e00\u62db\u901a\u5403\uff0c\u5c06\u64cd\u4f5c\u76ee\u6807\u9501\u5b9a\u4e3a\u6570\u7ec4\u7c7b\u578b\u7f62\u4e86\u3002"),Object(b.b)("h3",{id:"26-map"},"2.6. map"),Object(b.b)("p",null,"Map \u7684\u5b9e\u73b0\u4e0e Set \u5f88\u50cf\uff0c\u7c7b\u4f3c ES6 \u7684 Map\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-5"},"\u7528\u6cd5"),Object(b.b)("p",null,"\u4e0e Set \u4e0d\u540c\uff0cMap \u5141\u8bb8\u8bbe\u7f6e Key \u540d\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"initial")," \u662f\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f Map \u5bf9\u8c61\u3002"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Map initial={{ sounds: true, music: true, graphics: "medium" }}>\n  {({ set, get }) => (\n    <Tings>\n      <ToggleCheck checked={get("sounds")} onChange={c => set("sounds", c)}>\n        Game Sounds\n      </ToggleCheck>\n      <ToggleCheck checked={get("music")} onChange={c => set("music", c)}>\n        Bg Music\n      </ToggleCheck>\n      <Select\n        label="Graphics"\n        options={["low", "medium", "high"]}\n        selected={get("graphics")}\n        onSelect={value => set("graphics", value)}\n      />\n    </Tings>\n  )}\n</Map>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-5"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Map.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"values")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"{}"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," ",Object(b.b)("inlineCode",{parentName:"p"},"get")," ",Object(b.b)("inlineCode",{parentName:"p"},"clear")," ",Object(b.b)("inlineCode",{parentName:"p"},"has")," ",Object(b.b)("inlineCode",{parentName:"p"},"delete")," \u65b9\u6cd5\uff0c\u4fdd\u7559 ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,"\u7531\u4e8e\u4f7f\u7528\u5bf9\u8c61\u5b58\u50a8\u6570\u636e\u7ed3\u6784\uff0c\u64cd\u4f5c\u8d77\u6765\u6bd4\u6570\u7ec4\u65b9\u4fbf\u592a\u591a\uff0c\u5df2\u7ecf\u4e0d\u9700\u8981\u518d\u89e3\u91ca\u4e86\u3002"),Object(b.b)("p",null,"\u503c\u5f97\u5410\u69fd\u7684\u662f\uff0c\u4f5c\u8005\u4f7f\u7528\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"!=")," \u5224\u65ad has:"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  has: key => values[key] != null;\n}\n")),Object(b.b)("p",null,"\u8fd9\u79cd\u4ee3\u7801\u5e76\u4e0d\u503c\u5f97\u63d0\u5021\uff0c\u9996\u5148\u662f\u4e0d\u5e94\u8be5\u4f7f\u7528\u4e8c\u5143\u8fd0\u7b97\u7b26\uff0c\u5176\u6b21\u6bd4\u8f83\u63a8\u8350\u5199\u6210 ",Object(b.b)("inlineCode",{parentName:"p"},"values[key] !== undefined"),"\uff0c\u6bd5\u7adf ",Object(b.b)("inlineCode",{parentName:"p"},"set('null', null)")," \u4e5f\u5e94\u8be5\u7b97\u6709\u503c\u3002"),Object(b.b)("h3",{id:"27-state"},"2.7. state"),Object(b.b)("p",null,"State \u7eaf\u7cb9\u4e3a\u4e86\u66ff\u4ee3 React ",Object(b.b)("inlineCode",{parentName:"p"},"setState")," \u6982\u5ff5\uff0c\u5176\u672c\u8d28\u5c31\u662f\u6362\u4e86\u540d\u5b57\u7684 Value \u7ec4\u4ef6\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-6"},"\u7528\u6cd5"),Object(b.b)("p",null,"\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"setState")," \u652f\u6301\u51fd\u6570\u548c\u503c\u4f5c\u4e3a\u53c2\u6570\uff0c\u662f Value \u7ec4\u4ef6\u672c\u8eab\u652f\u6301\u7684\uff0cState \u7ec4\u4ef6\u989d\u5916\u9002\u914d\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"setState")," \u7684\u53e6\u4e00\u4e2a\u7279\u6027\uff1a\u5408\u5e76\u5bf9\u8c61\u3002"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},"<State initial={{ loading: false, data: null }}>\n  {({ state, setState }) => {\n    const onStart = data => setState({ loading: true });\n    const onFinish = data => setState({ data, loading: false });\n\n    return (\n      <DataReceiver data={state.data} onStart={onStart} onFinish={onFinish} />\n    );\n  }}\n</State>\n")),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/State.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"state")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"{}"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"setState")," \u65b9\u6cd5\uff0c\u4fdd\u7559 ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"setState")," \u5b9e\u73b0\u4e86\u5408\u5e76\u5bf9\u8c61\u7684\u529f\u80fd\uff0c\u4e5f\u5c31\u662f\u4f20\u5165\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5e76\u4e0d\u4f1a\u8986\u76d6\u539f\u59cb\u503c\uff0c\u800c\u662f\u4e0e\u539f\u59cb\u503c\u505a Merge:"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},'export default {\n  setState: (updater, cb) =>\n    set(\n      prev => ({\n        ...prev,\n        ...(typeof updater === "function" ? updater(prev) : updater)\n      }),\n      cb\n    );\n}\n')),Object(b.b)("h3",{id:"28-active"},"2.8. Active"),Object(b.b)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u5185\u7f6e\u9f20\u6807\u4ea4\u4e92\u76d1\u542c\u7684\u5bb9\u5668\uff0c\u76d1\u542c\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"onMouseUp")," \u4e0e ",Object(b.b)("inlineCode",{parentName:"p"},"onMouseDown"),"\uff0c\u5e76\u4f9d\u6b64\u5224\u65ad ",Object(b.b)("inlineCode",{parentName:"p"},"active")," \u72b6\u6001\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-7"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Active>\n  {({ active, bind }) => (\n    <div {...bind}>\n      You are {active ? "clicking" : "not clicking"} this div.\n    </div>\n  )}\n</Active>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-6"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Active.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"active")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"false"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u4e5f\u5de7\u5999\u5229\u7528\u4e86 Value \u63d0\u4f9b\u7684 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," \u66f4\u65b0\u72b6\u6001\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  bind: {\n    onMouseDown: () => set(true),\n    onMouseUp: () => set(false)\n  }\n};\n")),Object(b.b)("h3",{id:"29-focus"},"2.9. Focus"),Object(b.b)("p",null,"\u4e0e Active \u7c7b\u4f3c\uff0cFocus \u662f\u5f53 focus \u65f6\u624d\u89e6\u53d1\u72b6\u6001\u53d8\u5316\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-8"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Focus>\n  {({ focused, bind }) => (\n    <div>\n      <input {...bind} placeholder="Focus me" />\n      <div>You are {focused ? "focusing" : "not focusing"} the input.</div>\n    </div>\n  )}\n</Focus>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-7"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Focus.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"focused")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"false"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u4e0e Active \u5982\u51fa\u4e00\u8f99\uff0c\u4ec5\u662f\u76d1\u542c\u65f6\u673a\u53d8\u6210\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"onFocus")," \u548c ",Object(b.b)("inlineCode",{parentName:"p"},"onBlur"),"\u3002"),Object(b.b)("h3",{id:"210-focusmanager"},"2.10. FocusManager"),Object(b.b)("p",null,"\u4e0d\u77e5\u9053\u51fa\u4e8e\u4ec0\u4e48\u8003\u8651\uff0cFocusManager \u7684\u5b98\u65b9\u6587\u6863\u662f\u7a7a\u7684\uff0c\u800c\u4e14 Help wanted\u3002\u3002"),Object(b.b)("p",null,"\u6b63\u5982\u540d\u5b57\u63cf\u8ff0\u7684\uff0c\u8fd9\u662f\u4e00\u4e2a Focus \u63a7\u5236\u5668\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"blur")," \u6765\u53d6\u6d88\u7126\u70b9\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-9"},"\u7528\u6cd5"),Object(b.b)("p",null,"\u7b14\u8005\u7ed9\u4e86\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5728 5 \u79d2\u540e\u81ea\u52a8\u5931\u53bb\u7126\u70b9\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<FocusFocusManager>\n  {({ focused, blur, bind }) => (\n    <div>\n      <input\n        {...bind}\n        placeholder="Focus me"\n        onClick={() => {\n          setTimeout(() => {\n            blur();\n          }, 5000);\n        }}\n      />\n      <div>You are {focused ? "focusing" : "not focusing"} the input.</div>\n    </div>\n  )}\n</FocusFocusManager>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-8"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/FocusManager.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"focused")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"false"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," ",Object(b.b)("inlineCode",{parentName:"p"},"blur")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"blur")," \u65b9\u6cd5\u76f4\u63a5\u8c03\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"document.activeElement.blur()")," \u6765\u89e6\u53d1\u5176 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u76d1\u542c\u7684 ",Object(b.b)("inlineCode",{parentName:"p"},"onBlur")," \u8fbe\u5230\u66f4\u65b0\u72b6\u6001\u7684\u6548\u679c\u3002"),Object(b.b)("p",null,"By the way, \u8fd8\u76d1\u542c\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"onMouseDown")," \u4e0e ",Object(b.b)("inlineCode",{parentName:"p"},"onMouseUp"),":"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  bind: {\n    tabIndex: -1,\n    onBlur: () => {\n      if (canBlur) {\n        set(false);\n      }\n    },\n    onFocus: () => set(true),\n    onMouseDown: () => (canBlur = false),\n    onMouseUp: () => (canBlur = true)\n  }\n};\n")),Object(b.b)("p",null,"\u53ef\u80fd\u610f\u56fe\u662f\u9632\u6b62\u5728 ",Object(b.b)("inlineCode",{parentName:"p"},"mouseDown")," \u65f6\u89e6\u53d1 ",Object(b.b)("inlineCode",{parentName:"p"},"blur"),"\uff0c\u56e0\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"focus")," \u7684\u65f6\u673a\u4e00\u822c\u662f ",Object(b.b)("inlineCode",{parentName:"p"},"mouseDown"),"\u3002"),Object(b.b)("h3",{id:"211-hover"},"2.11. Hover"),Object(b.b)("p",null,"\u4e0e Focus \u7c7b\u4f3c\uff0c\u53ea\u662f\u89e6\u53d1\u65f6\u673a\u4e3a Hover\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-10"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Hover>\n  {({ hovered, bind }) => (\n    <div {...bind}>\n      You are {hovered ? "hovering" : "not hovering"} this div.\n    </div>\n  )}\n</Hover>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-9"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Hover.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"hovered")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"false"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u4e0e Active\u3001Focus \u5982\u51fa\u4e00\u8f99\uff0c\u4ec5\u662f\u76d1\u542c\u65f6\u673a\u53d8\u6210\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"onMouseEnter")," \u548c ",Object(b.b)("inlineCode",{parentName:"p"},"onMouseLeave"),"\u3002"),Object(b.b)("h3",{id:"212-touch"},"2.12. Touch"),Object(b.b)("p",null,"\u4e0e Hover \u7c7b\u4f3c\uff0c\u53ea\u662f\u89e6\u53d1\u65f6\u673a\u4e3a Hover\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-11"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Touch>\n  {({ touched, bind }) => (\n    <div {...bind}>\n      You are {touched ? "touching" : "not touching"} this div.\n    </div>\n  )}\n</Touch>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-10"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Hover.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"touched")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"false"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\u4e0e Active\u3001Focus\u3001Hover \u5982\u51fa\u4e00\u8f99\uff0c\u4ec5\u662f\u76d1\u542c\u65f6\u673a\u53d8\u6210\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"onTouchStart")," \u548c ",Object(b.b)("inlineCode",{parentName:"p"},"onTouchEnd"),"\u3002"),Object(b.b)("h3",{id:"213-field"},"2.13. Field"),Object(b.b)("p",null,"\u4e0e Value \u7ec4\u4ef6\u552f\u4e00\u7684\u533a\u522b\uff0c\u5c31\u662f\u652f\u6301\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind"),"\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-12"},"\u7528\u6cd5"),Object(b.b)("p",null,"\u8fd9\u4e2a\u7528\u6cd5\u548c Value \u6ca1\u533a\u522b\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},"<Field>\n  {({ value, set }) => (\n    <ControlledField value={value} onChange={e => set(e.target.value)} />\n  )}\n</Field>\n")),Object(b.b)("p",null,"\u4f46\u662f\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u66f4\u7b80\u5355\uff1a"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Field initial="hello world">\n  {({ bind }) => <ControlledField {...bind} />}\n</Field>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-11"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Field.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u4fdd\u7559\u4e0d\u53d8\uff0c\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"''"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u65b9\u6cd5\uff0c\u4fdd\u7559 ",Object(b.b)("inlineCode",{parentName:"p"},"set")," ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,"\u4e0e Value \u7684\u552f\u4e00\u533a\u522b\u662f\uff0c\u652f\u6301\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"bind")," \u5e76\u5c01\u88c5 ",Object(b.b)("inlineCode",{parentName:"p"},"onChange")," \u76d1\u542c\uff0c\u4e0e\u8d4b\u503c\u53d7\u63a7\u5c5e\u6027 ",Object(b.b)("inlineCode",{parentName:"p"},"value"),"\u3002"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},"export default {\n  bind: {\n    value,\n    onChange: event => {\n      if (isObject(event) && isObject(event.target)) {\n        set(event.target.value);\n      } else {\n        set(event);\n      }\n    }\n  }\n};\n")),Object(b.b)("h3",{id:"214-form"},"2.14. Form"),Object(b.b)("p",null,"\u8fd9\u662f\u4e00\u4e2a\u8868\u5355\u5de5\u5177\uff0c\u6709\u70b9\u7c7b\u4f3c Antd \u7684 Form \u7ec4\u4ef6\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-13"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},'<Form initial={{ firstName: "", lastName: "" }}>\n  {({ field, values }) => (\n    <form\n      onSubmit={e => {\n        e.preventDefault();\n        console.log("Form Submission Data:", values);\n      }}\n    >\n      <input\n        type="text"\n        placeholder="Your First Name"\n        {...field("firstName").bind}\n      />\n      <input\n        type="text"\n        placeholder="Your Last Name"\n        {...field("lastName").bind}\n      />\n      <input type="submit" value="All Done!" />\n    </form>\n  )}\n</Form>\n')),Object(b.b)("h4",{id:"\u6e90\u7801-12"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Form.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1aValue")),Object(b.b)("p",null,"\u4f9d\u7136\u5229\u7528 Value \u7ec4\u4ef6\uff0c",Object(b.b)("inlineCode",{parentName:"p"},"value")," \u91cd\u547d\u540d\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"values")," \u4e14\u521d\u59cb\u503c\u4e3a ",Object(b.b)("inlineCode",{parentName:"p"},"{}"),"\uff0c\u589e\u52a0\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"setValues")," ",Object(b.b)("inlineCode",{parentName:"p"},"field")," \u65b9\u6cd5\uff0c\u4fdd\u7559 ",Object(b.b)("inlineCode",{parentName:"p"},"reset")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,"\u8868\u5355\u6700\u91cd\u8981\u7684\u5c31\u662f ",Object(b.b)("inlineCode",{parentName:"p"},"field")," \u51fd\u6570\uff0c\u4e3a\u8868\u5355\u7684\u6bcf\u4e00\u4e2a\u63a7\u4ef6\u505a\u7ed1\u5b9a\uff0c\u540c\u65f6\u8bbe\u7f6e\u4e00\u4e2a\u8868\u5355\u552f\u4e00 ",Object(b.b)("inlineCode",{parentName:"p"},"key"),":"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-typescript"},'export default {\n  field: id => {\n    const value = values[id];\n    const setValue = updater =>\n      typeof updater === "function"\n        ? set(prev => ({ ...prev, [id]: updater(prev[id]) }))\n        : set({ ...values, [id]: updater });\n\n    return {\n      value,\n      set: setValue,\n      bind: {\n        value,\n        onChange: event => {\n          if (isObject(event) && isObject(event.target)) {\n            setValue(event.target.value);\n          } else {\n            setValue(event);\n          }\n        }\n      }\n    };\n  }\n};\n')),Object(b.b)("p",null,"\u53ef\u4ee5\u770b\u5230\uff0c\u4e3a\u8868\u5355\u7684\u6bcf\u4e00\u9879\u7ed1\u5b9a\u7684\u5185\u5bb9\u4e0e Field \u7ec4\u4ef6\u4e00\u6837\uff0c\u53ea\u662f Form \u7ec4\u4ef6\u7684\u884c\u4e3a\u662f\u6279\u91cf\u7684\u3002"),Object(b.b)("h3",{id:"215-interval"},"2.15. Interval"),Object(b.b)("p",null,"Interval \u6bd4\u8f83\u6709\u610f\u601d\uff0c\u5c06\u5b9a\u65f6\u5668\u4ee5 JSX \u65b9\u5f0f\u63d0\u4f9b\u51fa\u6765\uff0c\u5e76\u4e14\u63d0\u4f9b\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"stop")," ",Object(b.b)("inlineCode",{parentName:"p"},"resume")," \u65b9\u6cd5\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-14"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},"<Interval delay={1000}>\n  {({ start, stop }) => (\n    <>\n      <div>The time is now {new Date().toLocaleTimeString()}</div>\n      <button onClick={() => stop()}>Stop interval</button>\n      <button onClick={() => start()}>Start interval</button>\n    </>\n  )}\n</Interval>\n")),Object(b.b)("h4",{id:"\u6e90\u7801-13"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/components/Interval.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1a\u65e0")),Object(b.b)("p",null,"\u63d0\u4f9b\u4e86 ",Object(b.b)("inlineCode",{parentName:"p"},"start")," ",Object(b.b)("inlineCode",{parentName:"p"},"stop")," ",Object(b.b)("inlineCode",{parentName:"p"},"toggle")," \u65b9\u6cd5\u3002"),Object(b.b)("p",null,"\u5b9e\u73b0\u65b9\u5f0f\u662f\uff0c\u5728\u7ec4\u4ef6\u5185\u90e8\u7ef4\u62a4\u4e00\u4e2a Interval \u5b9a\u65f6\u5668\uff0c\u5b9e\u73b0\u4e86\u7ec4\u4ef6\u66f4\u65b0\u3001\u9500\u6bc1\u65f6\u7684\u8ba1\u65f6\u5668\u66f4\u65b0\u3001\u9500\u6bc1\u64cd\u4f5c\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u8fd9\u79cd\u5b9a\u65f6\u5668\u7684\u751f\u547d\u5468\u671f\u7ed1\u5b9a\u4e86 React \u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f\uff0c\u4e0d\u7528\u62c5\u5fc3\u9500\u6bc1\u548c\u66f4\u65b0\u7684\u95ee\u9898\u3002"),Object(b.b)("p",null,"\u5177\u4f53\u903b\u8f91\u5c31\u4e0d\u5217\u4e3e\u4e86\uff0c\u5229\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"setInterval")," ",Object(b.b)("inlineCode",{parentName:"p"},"clearInterval")," \u51fd\u6570\u57fa\u672c\u4e0a\u5c31\u53ef\u4ee5\u4e86\u3002"),Object(b.b)("h3",{id:"216-compose"},"2.16. Compose"),Object(b.b)("p",null,"Compose \u4e5f\u662f\u4e2a\u6709\u8da3\u7684\u7ec4\u4ef6\uff0c\u53ef\u4ee5\u5c06\u4e0a\u9762\u63d0\u5230\u7684\u4efb\u610f\u591a\u4e2a\u7ec4\u4ef6\u7ec4\u5408\u4f7f\u7528\u3002"),Object(b.b)("h4",{id:"\u7528\u6cd5-15"},"\u7528\u6cd5"),Object(b.b)("pre",null,Object(b.b)("code",{parentName:"pre",className:"language-tsx"},"<Compose components={[Counter, Toggle]}>\n  {(counter, toggle) => (\n    <ProductCard\n      {...productInfo}\n      favorite={toggle.on}\n      onFavorite={toggle.toggle}\n      count={counter.count}\n      onAdd={counter.inc}\n      onRemove={counter.dec}\n    />\n  )}\n</Compose>\n")),Object(b.b)("h4",{id:"\u6e90\u7801-14"},"\u6e90\u7801"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",{parentName:"li",href:"https://github.com/renatorib/react-powerplug/blob/master/src/utils/compose.js"},"\u6e90\u7801\u5730\u5740")),Object(b.b)("li",{parentName:"ul"},"\u539f\u6599\uff1a\u65e0")),Object(b.b)("p",null,"\u901a\u8fc7\u9012\u5f52\u6e32\u67d3\u51fa\u5d4c\u5957\u7ed3\u6784\uff0c\u5e76\u5c06\u6bcf\u4e00\u5c42\u7ed3\u6784\u8f93\u51fa\u7684\u503c\u5b58\u50a8\u5230 ",Object(b.b)("inlineCode",{parentName:"p"},"propsList")," \u4e2d\uff0c\u6700\u540e\u4e00\u8d77\u4f20\u9012\u7ed9\u7ec4\u4ef6\u3002",Object(b.b)("strong",{parentName:"p"},"\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u6bcf\u4e2a\u51fd\u6570 ",Object(b.b)("inlineCode",{parentName:"strong"},"value")," \u4e00\u822c\u90fd\u8981\u91cd\u547d\u540d\u7684\u539f\u56e0\u3002")),Object(b.b)("p",null,"\u5728 ",Object(b.b)("a",{parentName:"p",href:"https://github.com/dt-fe/weekly/blob/master/75.%E7%B2%BE%E8%AF%BB%E3%80%8AEpitath%20%E6%BA%90%E7%A0%81%20-%20renderProps%20%E6%96%B0%E7%94%A8%E6%B3%95%E3%80%8B.md"},"\u7cbe\u8bfb\u300aEpitath \u6e90\u7801 - renderProps \u65b0\u7528\u6cd5\u300b")," \u6587\u7ae0\u4e2d\uff0c\u7b14\u8005\u5c31\u4ecb\u7ecd\u4e86\u5229\u7528 ",Object(b.b)("inlineCode",{parentName:"p"},"generator")," \u89e3\u51b3\u9ad8\u9636\u7ec4\u4ef6\u5d4c\u5957\u7684\u95ee\u9898\u3002"),Object(b.b)("p",null,"\u5728 ",Object(b.b)("a",{parentName:"p",href:"https://github.com/dt-fe/weekly/blob/master/79.%E7%B2%BE%E8%AF%BB%E3%80%8AReact%20Hooks%E3%80%8B.md"},"\u7cbe\u8bfb\u300aReact Hooks\u300b")," \u6587\u7ae0\u4e2d\uff0c\u4ecb\u7ecd\u4e86 React Hooks \u5df2\u7ecf\u5b9e\u73b0\u4e86\u8fd9\u4e2a\u7279\u6027\u3002"),Object(b.b)("p",null,'\u6240\u4ee5\u5f53\u4f60\u4e86\u89e3\u4e86\u8fd9\u4e09\u79cd "compose" \u65b9\u6cd5\u540e\uff0c\u5c31\u53ef\u4ee5\u5728\u5408\u9002\u7684\u573a\u666f\u4f7f\u7528\u5408\u9002\u7684 compose \u65b9\u5f0f\u7b80\u5316\u4ee3\u7801\u3002'),Object(b.b)("h2",{id:"3-\u603b\u7ed3"},"3. \u603b\u7ed3"),Object(b.b)("p",null,"\u770b\u5b8c\u4e86\u6e90\u7801\u5206\u6790\uff0c\u4e0d\u77e5\u9053\u4f60\u662f\u66f4\u611f\u5174\u8da3\u4f7f\u7528\u8fd9\u4e2a\u5e93\u5462\uff0c\u8fd8\u662f\u5df2\u7ecf\u8dc3\u8dc3\u6b32\u8bd5\u5f00\u59cb\u9020\u8f6e\u5b50\u4e86\u5462\uff1f\u4e0d\u8bba\u5982\u4f55\uff0c\u8fd9\u4e2a\u5e93\u7684\u601d\u60f3\u5728\u65e5\u5e38\u7684\u4e1a\u52a1\u5f00\u53d1\u4e2d\u90fd\u5e94\u8be5\u5927\u91cf\u5b9e\u8df5\u3002"),Object(b.b)("p",null,"\u53e6\u5916 Hooks \u7248\u7684 PowerPlug \u5df2\u7ecf 4 \u4e2a\u6708\u6ca1\u6709\u66f4\u65b0\u4e86\uff08\u975e\u5b98\u65b9\uff09\uff1a",Object(b.b)("a",{parentName:"p",href:"https://github.com/kalcifer/react-powerhooks"},"react-powerhooks"),"\uff0c\u4e5f\u8bb8\u4e0b\u4e00\u4e2a\u7ef4\u62a4\u8005/\u8d21\u732e\u8005 \u5c31\u662f\u4f60\u3002"),Object(b.b)("blockquote",null,Object(b.b)("p",{parentName:"blockquote"},"\u8ba8\u8bba\u5730\u5740\u662f\uff1a",Object(b.b)("a",{parentName:"p",href:"https://github.com/dt-fe/weekly/issues/129"},"\u7cbe\u8bfb\u300aReact PowerPlug \u6e90\u7801\u300b \xb7 Issue #129 \xb7 dt-fe/weekly"))),Object(b.b)("p",null,Object(b.b)("strong",{parentName:"p"},"\u5982\u679c\u4f60\u60f3\u53c2\u4e0e\u8ba8\u8bba\uff0c\u8bf7",Object(b.b)("a",{parentName:"strong",href:"https://github.com/dt-fe/weekly"},"\u70b9\u51fb\u8fd9\u91cc"),"\uff0c\u6bcf\u5468\u90fd\u6709\u65b0\u7684\u4e3b\u9898\uff0c\u5468\u672b\u6216\u5468\u4e00\u53d1\u5e03\u3002\u524d\u7aef\u7cbe\u8bfb - \u5e2e\u4f60\u7b5b\u9009\u9760\u8c31\u7684\u5185\u5bb9\u3002")))}o.isMDXComponent=!0},467:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var a=n(0),l=n.n(a);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},b=Object.keys(e);for(a=0;a<b.length;a++)n=b[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(e);for(a=0;a<b.length;a++)n=b[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var p=l.a.createContext({}),o=function(e){var t=l.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},u=function(e){var t=o(e.components);return l.a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return l.a.createElement(l.a.Fragment,{},t)}},d=l.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,b=e.originalType,r=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=o(n),d=a,m=u["".concat(r,".").concat(d)]||u[d]||s[d]||b;return n?l.a.createElement(m,c(c({ref:t},p),{},{components:n})):l.a.createElement(m,c({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var b=n.length,r=new Array(b);r[0]=d;var c={};for(var i in t)hasOwnProperty.call(t,i)&&(c[i]=t[i]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var p=2;p<b;p++)r[p]=n[p];return l.a.createElement.apply(null,r)}return l.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);