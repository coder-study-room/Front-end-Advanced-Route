<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="å‰ç«¯è¿›é˜¶å¯¼èˆª(2021ç‰ˆ) Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="å‰ç«¯è¿›é˜¶å¯¼èˆª(2021ç‰ˆ) Blog Atom Feed"><title data-react-helmet="true">104. ç²¾è¯»ã€ŠFunction Component å…¥é—¨ã€‹ ğŸ¦– å‰ç«¯è¿›é˜¶å¯¼èˆª(2021ç‰ˆ)</title><meta data-react-helmet="true" property="og:url" content="https://coder-study-room.github.io/weekly/104"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-weekly-current"><meta data-react-helmet="true" property="og:title" content="104. ç²¾è¯»ã€ŠFunction Component å…¥é—¨ã€‹ ğŸ¦– å‰ç«¯è¿›é˜¶å¯¼èˆª(2021ç‰ˆ)"><meta data-react-helmet="true" name="description" content="1. å¼•è¨€"><meta data-react-helmet="true" property="og:description" content="1. å¼•è¨€"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://coder-study-room.github.io/weekly/104"><link data-react-helmet="true" rel="alternate" href="https://coder-study-room.github.io/weekly/104" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://coder-study-room.github.io/weekly/104" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.f86f321e.css">
<link rel="preload" href="/assets/js/styles.48fdf49e.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.cfc8bc6d.js" as="script">
<link rel="preload" href="/assets/js/main.7ffafd13.js" as="script">
<link rel="preload" href="/assets/js/1.541d8dcb.js" as="script">
<link rel="preload" href="/assets/js/2.581e2f12.js" as="script">
<link rel="preload" href="/assets/js/3.dfb6f406.js" as="script">
<link rel="preload" href="/assets/js/1be78505.75de0bb5.js" as="script">
<link rel="preload" href="/assets/js/314.3ef377ff.js" as="script">
<link rel="preload" href="/assets/js/cc953bd4.d7c2bc94.js" as="script">
<link rel="preload" href="/assets/js/17896441.b25e6bc3.js" as="script">
<link rel="preload" href="/assets/js/0704281e.a09360a8.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Front-end Advanced Route Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Front-end Advanced Route Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">å‰ç«¯è¿›é˜¶å¯¼èˆª(2021ç‰ˆ)</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">å‰ç«¯å­¦ä¹ </a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/">å‰ç«¯è¿›é˜¶</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/weekly/">å‰ç«¯ç²¾è¯»</a></li></ul></div><a class="navbar__item navbar__link" href="/interview/">å‰ç«¯é¢è¯•</a></div><div class="navbar__items navbar__items--right"><a href="https://juejin.cn/user/149189280672616/posts" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">æ˜é‡‘</a><a href="https://www.itdongdong.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">åšå®¢</a><a href="https://www.aliyun.com/minisite/goods?userCode=656jmlbm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">é˜¿é‡Œäº‘2æŠ˜</a><a href="https://github.com/coder-study-room/Front-end-Advanced-Route" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Front-end Advanced Route Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Front-end Advanced Route Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">å‰ç«¯è¿›é˜¶å¯¼èˆª(2021ç‰ˆ)</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">å‰ç«¯å­¦ä¹ </a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">å‰ç«¯è¿›é˜¶</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/weekly/">å‰ç«¯ç²¾è¯»</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/interview/">å‰ç«¯é¢è¯•</a></li><li class="menu__list-item"><a href="https://juejin.cn/user/149189280672616/posts" target="_blank" rel="noopener noreferrer" class="menu__link">æ˜é‡‘</a></li><li class="menu__list-item"><a href="https://www.itdongdong.com" target="_blank" rel="noopener noreferrer" class="menu__link">åšå®¢</a></li><li class="menu__list-item"><a href="https://www.aliyun.com/minisite/goods?userCode=656jmlbm" target="_blank" rel="noopener noreferrer" class="menu__link">é˜¿é‡Œäº‘2æŠ˜</a></li><li class="menu__list-item"><a href="https://github.com/coder-study-room/Front-end-Advanced-Route" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/"><img src="/img/logo.svg" alt="Front-end Advanced Route Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/logo.svg" alt="Front-end Advanced Route Logo" class="themedImage_1VuW themedImage--dark_hz6m"><strong>å‰ç«¯è¿›é˜¶å¯¼èˆª(2021ç‰ˆ)</strong></a><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">å‰ç«¯ç²¾è¯»</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/">1. ç²¾è¯» js æ¨¡å—åŒ–å‘å±•</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/002">2. ç²¾è¯»æ¨¡æ€æ¡†çš„æœ€ä½³å®è·µ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/003">3. ç²¾è¯»å‰åç«¯æ¸²æŸ“ä¹‹äº‰</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/004">4. ç²¾è¯»AsyncAwaitä¼˜è¶Šä¹‹å¤„</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/005">5. ç²¾è¯»æ°‘å·¥å”å•é¡µæ•°æ®æµæ–¹æ¡ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/006">6. ç²¾è¯»JavaScripté”™è¯¯å †æ ˆå¤„ç†</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/007">7. ç²¾è¯» è¯·åœæ­¢ css-in-js çš„è¡Œä¸º</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/008">8. ç²¾è¯»å…¥å‘Reactå‰æ²¡æœ‰äººä¼šå‘Šè¯‰ä½ çš„äº‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/009">9. ç²¾è¯» Immutable ç»“æ„å…±äº«</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/010">10. ç²¾è¯»Web Components çš„å›°å¢ƒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/011">11. ç²¾è¯»å‰ç«¯è°ƒè¯•æŠ€å·§</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/012">12. ç²¾è¯» React é«˜é˜¶ç»„ä»¶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/013">13. This å¸¦æ¥çš„å›°æƒ‘</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/014">14. ç²¾è¯»æ¶æ„è®¾è®¡ä¹‹ DCI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/015">15. ç²¾è¯» TC39 ä¸ ECMAScript ææ¡ˆ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/016">16. CSS Animations vs Web Animations API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/017">17. ç²¾è¯»ã€Šå¦‚ä½•å®‰å…¨åœ°ä½¿ç”¨ React contextã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/018">18. ç²¾è¯»ã€Šè®¾è®¡å®Œç¾çš„æ—¥æœŸé€‰æ‹©å™¨ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/019">19. ç²¾è¯»ã€Šæœ€ä½³å‰ç«¯é¢è¯•é¢˜ã€‹åŠé¢è¯•å®˜æŠ€å·§</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/020">20. ç²¾è¯» ã€ŠNestjs æ–‡æ¡£ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/021">21. ç²¾è¯»ã€ŠWeb fonts: when you need them, when you donâ€™tã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/022">22. ç²¾è¯»ã€ŠV8 å¼•æ“ç‰¹æ€§å¸¦æ¥çš„çš„ JS æ€§èƒ½å˜åŒ–ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/023">23. ç²¾è¯»ã€ŠAPIè®¾è®¡åŸåˆ™ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/024">24. ç²¾è¯»ã€Šç°ä»£ JavaScript æ¦‚è§ˆã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/025">25. ç²¾è¯»ã€Šnull &gt;= 0?ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/026">26. ç²¾è¯»åŠ å¯†åª’ä½“æ‰©å±•ï¼ˆEncrypted Media Extensionsï¼ŒEMEï¼‰</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/027">27. ç²¾è¯»ã€Šcss-in-js æ€é¸¡ç”¨ç‰›åˆ€ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/028">28. ç²¾è¯»ã€Š2017å‰ç«¯æ€§èƒ½ä¼˜åŒ–å¤‡å¿˜å½•ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/029">29. ç²¾è¯»ã€ŠJS ä¸­çš„å†…å­˜ç®¡ç†ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/030">30. ç²¾è¯»ã€ŠJavascript äº‹ä»¶å¾ªç¯ä¸å¼‚æ­¥ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/031">31. ç²¾è¯»ã€Šæˆ‘ä¸å†ä½¿ç”¨é«˜é˜¶ç»„ä»¶ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/032">32. ç²¾è¯»ã€ŠReact Router4.0 è¿›é˜¶æ¦‚å¿µã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/033">33. ç²¾è¯»ã€Š30è¡Œjsä»£ç åˆ›å»ºç¥ç»ç½‘ç»œã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/034">34. ç²¾è¯»ã€ŠReact ä»£ç æ•´æ´ä¹‹é“ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/035">35. ç²¾è¯»ã€Šdob - æ¡†æ¶å®ç°ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/036">36. ç²¾è¯»ã€ŠWhen You â€œGitâ€ in Trouble- a Version Control Storyã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/037">37. ç²¾è¯»ã€Šhow we position and what we compareã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/038">38. ç²¾è¯»ã€Šdob - æ¡†æ¶ä½¿ç”¨ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/039">39. ç²¾è¯»ã€Šå…¨é“¾è·¯ä½“éªŒæµè§ˆå™¨æŒ–çŸ¿ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/040">40. ç²¾è¯»ã€Šåˆæ¢ Reason ä¸ GraphQLã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/041">41. ç²¾è¯»ã€ŠAnt Design 3.0 èƒŒåçš„æ•…äº‹ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/042">42. ç²¾è¯»ã€Šå‰ç«¯æ•°æ®æµå“²å­¦ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/043">43. ç²¾è¯»ã€Šå¢å¼ºç°å®ä¸å¯è§†åŒ–ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/044">44. ç²¾è¯»ã€ŠRekit Studioã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/045">45. ç²¾è¯»ã€ŠReact&#x27;s new Context APIã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/046">46. ç²¾è¯»ã€Šreact-rxjsã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/047">47. ç²¾è¯»ã€Šwebpack4.0 å‡çº§æŒ‡å—ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/048">48. ç²¾è¯»ã€ŠImmer.jsã€‹æºç </a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/049">49. ç²¾è¯»ã€ŠCompilers are the New Frameworksã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/050">50. ç²¾è¯»ã€Šå¿«é€Ÿä¸Šæ‰‹æ„å»º ARKit åº”ç”¨ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/051">51. ç²¾è¯»ã€ŠElements of Web Devã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/052">52. ç²¾è¯»ã€Šå›¾è§£ ES æ¨¡å—ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/053">53. ç²¾è¯»ã€Šæ’ä»¶åŒ–æ€ç»´ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/054">54. ç²¾è¯»ã€Šåœ¨æµè§ˆå™¨è¿è¡Œ serverRenderã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/055">55. ç²¾è¯»ã€Šasync await æ˜¯æŠŠåŒåˆƒå‰‘ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/056">56. ç²¾è¯»ã€Šé‡æ–°æ€è€ƒ Reduxã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/057">57. ç²¾è¯»ã€Šç°ä»£ js æ¡†æ¶å­˜åœ¨çš„æ ¹æœ¬åŸå› ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/058">58. ç²¾è¯»ã€ŠTypescript2.0 - 2.9ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/059">59. ç²¾è¯»ã€Šå¦‚ä½•åˆ©ç”¨ Nodejs ç›‘å¬æ–‡ä»¶å¤¹ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/060">60. ç²¾è¯»ã€Šå¦‚ä½•åœ¨ nodejs ä½¿ç”¨ç¯å¢ƒå˜é‡ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/061">61. ç²¾è¯»ã€ŠReact å…«ç§æ¡ä»¶æ¸²æŸ“ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/062">62. ç²¾è¯»ã€ŠJS å¼•æ“åŸºç¡€ä¹‹ Shapes and Inline Cachesã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/063">63. ç²¾è¯»ã€ŠReact çš„å¤šæ€æ€§ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/064">64. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - è¯æ³•åˆ†æã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/065">65. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - æ–‡æ³•ä»‹ç»ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/066">66. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - è¯­æ³•åˆ†æã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/067">67. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - å›æº¯ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/068">68. ç²¾è¯»è¡¡é‡ç”¨æˆ·ä½“éªŒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/069">69. ç²¾è¯»ã€ŠSQL vs Fluxã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/070">70. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - è¯­æ³•æ ‘ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/071">71. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - é”™è¯¯æç¤ºã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/072">72. ç²¾è¯»ã€ŠREST, GraphQL, Webhooks, &amp; gRPC å¦‚ä½•é€‰å‹ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/073">73. ç²¾è¯»ã€Šsqorn æºç ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/074">74. ç²¾è¯»ã€Š12 ä¸ªè¯„ä¼° JS åº“ä½ éœ€è¦å…³å¿ƒçš„äº‹ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/075">75. ç²¾è¯»ã€ŠEpitath æºç  - renderProps æ–°ç”¨æ³•ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/076">76. ç²¾è¯»ã€Šè°ˆè°ˆ Web Workersã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/077">77. ç²¾è¯»ã€Šç”¨ Reduce å®ç° Promise ä¸²è¡Œæ‰§è¡Œã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/078">78. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - æ€§èƒ½ä¼˜åŒ–ä¹‹ç¼“å­˜ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/079">79. ç²¾è¯»ã€ŠReact Hooksã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/080">80. ç²¾è¯»ã€Šæ€ä¹ˆç”¨ React Hooks é€ è½®å­ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/081">81. ç²¾è¯»ã€Šä½¿ç”¨ CSS å±æ€§é€‰æ‹©å™¨ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/082">82. ç²¾è¯»ã€ŠHtm - Hyperscript æºç ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/083">83. ç²¾è¯»ã€ŠReact16 æ–°ç‰¹æ€§ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/084">84. ç²¾è¯»ã€ŠTypescript 3.2 æ–°ç‰¹æ€§ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/085">85. ç²¾è¯»ã€Šæ‰‹å†™ SQL ç¼–è¯‘å™¨ - æ™ºèƒ½æç¤ºã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/086">86. ç²¾è¯»ã€Šå›½é™…åŒ–å¸ƒå±€ - Logical Propertiesã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/087">87. ç²¾è¯»ã€ŠsetState åšäº†ä»€ä¹ˆã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/088">88. ç²¾è¯»ã€ŠCaches APIã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/089">89. ç²¾è¯»ã€Šå¦‚ä½•ç¼–è¯‘å‰ç«¯é¡¹ç›®ä¸ç»„ä»¶ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/090">90. ç²¾è¯»ã€Šæå®¢å…¬å›­ 2019ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/091">91. ç²¾è¯»ã€Šæ­£åˆ™ ES2018ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/092">92. ç²¾è¯»ã€ŠReact PowerPlug æºç ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/093">93. ç²¾è¯»ã€Šsyntax-parser æºç ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/094">94. ç²¾è¯»ã€ŠServerless ç»™å‰ç«¯å¸¦æ¥äº†ä»€ä¹ˆã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/095">95. ç²¾è¯»ã€ŠFunction VS Class ç»„ä»¶ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/096">96. ç²¾è¯»ã€ŠuseEffect å®Œå…¨æŒ‡å—ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/097">97. ç²¾è¯»ã€Šç¼–å†™æœ‰å¼¹æ€§çš„ç»„ä»¶ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/098">98. ç²¾è¯»ã€Šreact-easy-state æºç ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/099">99. ç²¾è¯»ã€ŠScheduling in Reactã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/100">100. ç²¾è¯»ã€ŠV8 å¼•æ“ Lazy Parsingã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/101">101. ç²¾è¯»ã€ŠæŒç»­é›†æˆ vs æŒç»­äº¤ä»˜ vs æŒç»­éƒ¨ç½²ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/102">102. ç²¾è¯»ã€ŠMonorepo çš„ä¼˜åŠ¿ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/103">103. ç²¾è¯»ã€Šä¸ºä»€ä¹ˆä¸“å®¶ä¸å†å…³å¿ƒæŠ€æœ¯ç»†èŠ‚ã€‹</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/weekly/104">104. ç²¾è¯»ã€ŠFunction Component å…¥é—¨ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/105">105. ç²¾è¯»ã€ŠWhat&#x27;s new in javascriptã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/106">106. ç²¾è¯»ã€Šæ•°æ®ä¹‹ä¸ŠÂ·æ™ºæ…§ä¹‹å…‰ - 2018ã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/107">107. ç²¾è¯»ã€ŠOptional chainingã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/108">108. ç²¾è¯»ã€Šæ™ºèƒ½å•†ä¸šã€‹</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/weekly/109">109. ç²¾è¯»ã€ŠVue3.0 Function APIã€‹</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="1-å¼•è¨€"></a>1. å¼•è¨€<a class="hash-link" href="#1-å¼•è¨€" title="Direct link to heading">#</a></h2><p>å¦‚æœä½ åœ¨ä½¿ç”¨ React 16ï¼Œå¯ä»¥å°è¯• Function Component é£æ ¼ï¼Œäº«å—æ›´å¤§çš„çµæ´»æ€§ã€‚ä½†åœ¨å°è¯•ä¹‹å‰ï¼Œæœ€å¥½å…ˆé˜…è¯»æœ¬æ–‡ï¼Œå¯¹ Function Component çš„æ€ç»´æ¨¡å¼æœ‰ä¸€ä¸ªåˆæ­¥è®¤è¯†ï¼Œé˜²æ­¢å› æ€ç»´æ¨¡å¼ä¸åŒæ­¥é€ æˆçš„å›°æ‰°ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="2-ç²¾è¯»"></a>2. ç²¾è¯»<a class="hash-link" href="#2-ç²¾è¯»" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä»€ä¹ˆæ˜¯-function-componentï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Function Componentï¼Ÿ<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-function-componentï¼Ÿ" title="Direct link to heading">#</a></h3><p>Function Component å°±æ˜¯ä»¥ Function çš„å½¢å¼åˆ›å»ºçš„ React ç»„ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">App</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">App</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¹Ÿå°±æ˜¯ï¼Œä¸€ä¸ªè¿”å›äº† JSX æˆ– <code>createElement</code> çš„ Function å°±å¯ä»¥å½“ä½œ React ç»„ä»¶ï¼Œè¿™ç§å½¢å¼çš„ç»„ä»¶å°±æ˜¯ Function Componentã€‚</p><blockquote><p>æ‰€ä»¥æˆ‘å·²ç»å­¦ä¼š Function Component äº†å—ï¼Ÿ</p></blockquote><p>åˆ«æ€¥ï¼Œæ•…äº‹æ‰åˆšåˆšå¼€å§‹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä»€ä¹ˆæ˜¯-hooksï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ Hooksï¼Ÿ<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-hooksï¼Ÿ" title="Direct link to heading">#</a></h3><p>Hooks æ˜¯è¾…åŠ© Function Component çš„å·¥å…·ã€‚æ¯”å¦‚ <code>useState</code> å°±æ˜¯ä¸€ç§ Hookï¼Œå®ƒå¯ä»¥ç”¨æ¥ç®¡ç†çŠ¶æ€ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">button</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(36, 41, 46)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token tag script language-javascript" style="color:rgb(78, 201, 176)"> </span><span class="token tag script language-javascript operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token tag script language-javascript" style="color:rgb(78, 201, 176)"> </span><span class="token tag script language-javascript function" style="color:rgb(111, 66, 193)">setCount</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token tag script language-javascript" style="color:rgb(78, 201, 176)">count </span><span class="token tag script language-javascript operator" style="color:rgb(0, 92, 197)">+</span><span class="token tag script language-javascript" style="color:rgb(78, 201, 176)"> </span><span class="token tag script language-javascript number" style="color:rgb(78, 201, 176)">1</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">Click me</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">button</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>useState</code> è¿”å›çš„ç»“æœæ˜¯æ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ä¸€é¡¹æ˜¯ <strong>å€¼</strong>ï¼Œç¬¬äºŒé¡¹æ˜¯ <strong>èµ‹å€¼å‡½æ•°</strong>ï¼Œ<code>useState</code> å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ <strong>é»˜è®¤å€¼</strong>ï¼Œä¹Ÿæ”¯æŒå›è°ƒå‡½æ•°ã€‚æ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥å‚è€ƒ <a href="https://reactjs.org/docs/hooks-rules.html#explanation" target="_blank" rel="noopener noreferrer">Hooks è§„åˆ™è§£è¯»</a>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å…ˆèµ‹å€¼å†-settimeout-æ‰“å°"></a>å…ˆèµ‹å€¼å† setTimeout æ‰“å°<a class="hash-link" href="#å…ˆèµ‹å€¼å†-settimeout-æ‰“å°" title="Direct link to heading">#</a></h3><p>æˆ‘ä»¬å†å°† <code>useState</code> ä¸ <code>setTimeout</code> ç»“åˆä½¿ç”¨ï¼Œçœ‹çœ‹æœ‰ä»€ä¹ˆå‘ç°ã€‚</p><p>åˆ›å»ºä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åè®©è®¡æ•°å™¨è‡ªå¢ï¼Œ<strong>ä½†æ˜¯å»¶æ—¶ 3 ç§’åå†æ‰“å°å‡ºæ¥</strong>ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token function" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">button</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(36, 41, 46)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token tag script language-javascript" style="color:rgb(78, 201, 176)">log</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">Click me</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">button</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚æœæˆ‘ä»¬ <strong>åœ¨ä¸‰ç§’å†…è¿ç»­ç‚¹å‡»ä¸‰æ¬¡</strong>ï¼Œé‚£ä¹ˆ <code>count</code> çš„å€¼æœ€ç»ˆä¼šå˜æˆ <code>3</code>ï¼Œè€Œéšä¹‹è€Œæ¥çš„è¾“å‡ºç»“æœæ˜¯ã€‚ã€‚ï¼Ÿ</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly plain"><div tabindex="0" class="prism-code language-plain codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">0</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">1</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å—¯ï¼Œå¥½åƒå¯¹ï¼Œä½†æ€»è§‰å¾—æœ‰ç‚¹æ€ªï¼Ÿ</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä½¿ç”¨-class-component-æ–¹å¼å®ç°ä¸€éå‘¢ï¼Ÿ"></a>ä½¿ç”¨ Class Component æ–¹å¼å®ç°ä¸€éå‘¢ï¼Ÿ<a class="hash-link" href="#ä½¿ç”¨-class-component-æ–¹å¼å®ç°ä¸€éå‘¢ï¼Ÿ" title="Direct link to heading">#</a></h3><p>æ•²é»‘æ¿äº†ï¼Œå›åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ Class Component æ¨¡å¼ï¼Œå®ç°ä¸€éä¸Šé¢çš„åŠŸèƒ½ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Counter</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  state </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token function" style="color:rgb(111, 66, 193)">setState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token function" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">render</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">You clicked </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> times</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">p</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">button</span><span class="token tag" style="color:rgb(78, 201, 176)"> </span><span class="token tag attr-name" style="color:rgb(156, 220, 254)">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:rgb(36, 41, 46)">=</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token tag script language-javascript keyword" style="color:#e3116c">this</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token tag script language-javascript" style="color:rgb(78, 201, 176)">log</span><span class="token tag script language-javascript punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">Click me</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">button</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å—¯ï¼Œç»“æœåº”è¯¥ç­‰ä»·å§ï¼Ÿ3 ç§’å†…å¿«é€Ÿç‚¹å‡»ä¸‰æ¬¡æŒ‰é’®ï¼Œè¿™æ¬¡çš„ç»“æœæ˜¯ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly plain"><div tabindex="0" class="prism-code language-plain codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">3</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">3</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">3</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ€ä¹ˆå’Œ Function Component ç»“æœä¸ä¸€æ ·ï¼Ÿ</p><p><strong>è¿™æ˜¯ç”¨å¥½ Function Component å¿…é¡»è¿ˆè¿‡çš„ç¬¬ä¸€é“åï¼Œè¯·ç¡®è®¤å®Œå…¨ç†è§£ä¸‹é¢è¿™æ®µè¯ï¼š</strong></p><p>é¦–å…ˆå¯¹ Class Component è¿›è¡Œè§£é‡Šï¼š</p><ol><li>é¦–å…ˆ state æ˜¯ Immutable çš„ï¼Œ<code>setState</code> åä¸€å®šä¼šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„ state å¼•ç”¨ã€‚</li><li>ä½† Class Component é€šè¿‡ <code>this.state</code> æ–¹å¼è¯»å– stateï¼Œ<strong>è¿™å¯¼è‡´äº†æ¯æ¬¡ä»£ç æ‰§è¡Œéƒ½ä¼šæ‹¿åˆ°æœ€æ–°çš„ state å¼•ç”¨</strong>ï¼Œæ‰€ä»¥å¿«é€Ÿç‚¹å‡»ä¸‰æ¬¡çš„ç»“æœæ˜¯ <code>3 3 3</code>ã€‚</li></ol><p>é‚£ä¹ˆå¯¹ Function Component è€Œè¨€ï¼š</p><ol><li><code>useState</code> äº§ç”Ÿçš„æ•°æ®ä¹Ÿæ˜¯ Immutable çš„ï¼Œé€šè¿‡æ•°ç»„ç¬¬äºŒä¸ªå‚æ•° Set ä¸€ä¸ªæ–°å€¼åï¼ŒåŸæ¥çš„å€¼ä¼šå½¢æˆä¸€ä¸ªæ–°çš„å¼•ç”¨åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶ã€‚</li><li>ä½†ç”±äºå¯¹ state çš„è¯»å–æ²¡æœ‰é€šè¿‡ <code>this.</code> çš„æ–¹å¼ï¼Œä½¿å¾— <strong>æ¯æ¬¡ <code>setTimeout</code> éƒ½è¯»å–äº†å½“æ—¶æ¸²æŸ“é—­åŒ…ç¯å¢ƒçš„æ•°æ®ï¼Œè™½ç„¶æœ€æ–°çš„å€¼è·Ÿç€æœ€æ–°çš„æ¸²æŸ“å˜äº†ï¼Œä½†æ—§çš„æ¸²æŸ“é‡Œï¼ŒçŠ¶æ€ä¾ç„¶æ˜¯æ—§å€¼ã€‚</strong></li></ol><p>ä¸ºäº†æ›´å®¹æ˜“ç†è§£ï¼Œæˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸‰æ¬¡ Function Component æ¨¡å¼ä¸‹ç‚¹å‡»æŒ‰é’®æ—¶çš„çŠ¶æ€ï¼š</p><p>ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼Œå…±æ¸²æŸ“äº† 2 æ¬¡ï¼Œ<code>setTimeout</code> ç”Ÿæ•ˆåœ¨ç¬¬ <code>1</code> æ¬¡æ¸²æŸ“ï¼Œæ­¤æ—¶çŠ¶æ€ä¸ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç¬¬äºŒæ¬¡ç‚¹å‡»ï¼Œå…±æ¸²æŸ“äº† 3 æ¬¡ï¼Œ<code>setTimeout</code> ç”Ÿæ•ˆåœ¨ç¬¬ <code>2</code> æ¬¡æ¸²æŸ“ï¼Œæ­¤æ—¶çŠ¶æ€ä¸ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç¬¬ä¸‰æ¬¡ç‚¹å‡»ï¼Œå…±æ¸²æŸ“äº† 4 æ¬¡ï¼Œ<code>setTimeout</code> ç”Ÿæ•ˆåœ¨ç¬¬ <code>3</code> æ¬¡æ¸²æŸ“ï¼Œæ­¤æ—¶çŠ¶æ€ä¸ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªæ¸²æŸ“éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é—­åŒ…ï¼Œåœ¨ç‹¬ç«‹çš„ä¸‰æ¬¡æ¸²æŸ“ä¸­ï¼Œ<code>count</code> åœ¨æ¯æ¬¡æ¸²æŸ“ä¸­çš„å€¼åˆ†åˆ«æ˜¯ <code>0 1 2</code>ï¼Œæ‰€ä»¥æ— è®º <code>setTimeout</code> å»¶æ—¶å¤šä¹…ï¼Œæ‰“å°å‡ºæ¥çš„ç»“æœæ°¸è¿œæ˜¯ <code>0 1 2</code>ã€‚</p><p>ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°±èƒ½ç»§ç»­äº†ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å¦‚ä½•è®©-function-component-ä¹Ÿæ‰“å°-3-3-3ï¼Ÿ"></a>å¦‚ä½•è®© Function Component ä¹Ÿæ‰“å° <code>3 3 3</code>ï¼Ÿ<a class="hash-link" href="#å¦‚ä½•è®©-function-component-ä¹Ÿæ‰“å°-3-3-3ï¼Ÿ" title="Direct link to heading">#</a></h3><p>æ‰€ä»¥è¿™æ˜¯ä¸æ˜¯ä»£è¡¨ Function Component æ— æ³•è¦†ç›– Class Component çš„åŠŸèƒ½å‘¢ï¼Ÿå®Œå…¨ä¸æ˜¯ï¼Œ<strong>æˆ‘å¸Œæœ›ä½ è¯»å®Œæœ¬æ–‡åï¼Œä¸ä»…èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ›´èƒ½ç†è§£ä¸ºä»€ä¹ˆç”¨ Function Component å®ç°çš„ä»£ç æ›´ä½³åˆç†ã€ä¼˜é›…</strong>ã€‚</p><p>ç¬¬ä¸€ç§æ–¹æ¡ˆæ˜¯å€ŸåŠ©ä¸€ä¸ªæ–° Hook - <code>useRef</code> çš„èƒ½åŠ›ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> count </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token operator" style="color:rgb(0, 92, 197)">++</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">You</span><span class="token plain"> clicked </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> times</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">p</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ç§æ–¹æ¡ˆçš„æ‰“å°ç»“æœå°±æ˜¯ <code>3 3 3</code>ã€‚</p><p>æƒ³è¦ç†è§£ä¸ºä»€ä¹ˆï¼Œé¦–å…ˆè¦ç†è§£ <code>useRef</code> çš„åŠŸèƒ½ï¼š<strong>é€šè¿‡ <code>useRef</code> åˆ›å»ºçš„å¯¹è±¡ï¼Œå…¶å€¼åªæœ‰ä¸€ä»½ï¼Œè€Œä¸”åœ¨æ‰€æœ‰ Rerender ä¹‹é—´å…±äº«</strong>ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬å¯¹ <code>count.current</code> èµ‹å€¼æˆ–è¯»å–ï¼Œè¯»åˆ°çš„æ°¸è¿œæ˜¯å…¶æœ€æ–°å€¼ï¼Œè€Œä¸æ¸²æŸ“é—­åŒ…æ— å…³ï¼Œå› æ­¤å¦‚æœå¿«é€Ÿç‚¹å‡»ä¸‰ä¸‹ï¼Œå¿…å®šä¼šè¿”å› <code>3 3 3</code> çš„ç»“æœã€‚</p><p>ä½†è¿™ç§æ–¹æ¡ˆæœ‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯ä½¿ç”¨ <code>useRef</code> æ›¿ä»£äº† <code>useState</code> åˆ›å»ºå€¼ï¼Œé‚£ä¹ˆå¾ˆè‡ªç„¶çš„é—®é¢˜å°±æ˜¯ï¼Œå¦‚ä½•ä¸æ”¹å˜åŸå§‹å€¼çš„å†™æ³•ï¼Œè¾¾åˆ°åŒæ ·çš„æ•ˆæœå‘¢ï¼Ÿ</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å¦‚ä½•ä¸æ”¹é€ åŸå§‹å€¼ä¹Ÿæ‰“å°-3-3-3ï¼Ÿ"></a>å¦‚ä½•ä¸æ”¹é€ åŸå§‹å€¼ä¹Ÿæ‰“å° <code>3 3 3</code>ï¼Ÿ<a class="hash-link" href="#å¦‚ä½•ä¸æ”¹é€ åŸå§‹å€¼ä¹Ÿæ‰“å°-3-3-3ï¼Ÿ" title="Direct link to heading">#</a></h3><p>ä¸€ç§æœ€ç®€å•çš„åšæ³•ï¼Œå°±æ˜¯æ–°å»ºä¸€ä¸ª <code>useRef</code> çš„å€¼ç»™ <code>setTimeout</code> ä½¿ç”¨ï¼Œè€Œç¨‹åºå…¶ä½™éƒ¨åˆ†è¿˜æ˜¯ç”¨åŸå§‹çš„ <code>count</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> currentCount </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">You</span><span class="token plain"> clicked </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> times</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">p</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¼•å‡ºäº†ä¸€ä¸ªæ–°çš„ï¼Œä¹Ÿæ˜¯ <strong>æœ€é‡è¦çš„ Hook - <code>useEffect</code></strong>ï¼Œè¯·åŠ¡å¿…æ·±å…¥ç†è§£è¿™ä¸ªå‡½æ•°ã€‚</p><p><code>useEffect</code> æ˜¯å¤„ç†å‰¯ä½œç”¨çš„ï¼Œå…¶æ‰§è¡Œæ—¶æœºåœ¨ <strong>æ¯æ¬¡ Render æ¸²æŸ“å®Œæ¯•å</strong>ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œï¼Œåªæ˜¯å®é™…åœ¨çœŸå® DOM æ“ä½œå®Œæ¯•åã€‚</p><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼Œåœ¨æ¯æ¬¡æ¸²æŸ“å®Œæ¯•åï¼Œå°† <code>count</code> æ­¤æ—¶æœ€æ–°çš„å€¼èµ‹ç»™ <code>currentCount.current</code>ï¼Œè¿™æ ·å°±ä½¿ <code>currentCount</code> çš„å€¼è‡ªåŠ¨åŒæ­¥äº† <code>count</code> çš„æœ€æ–°å€¼ã€‚</p><p>ä¸ºäº†ç¡®ä¿å¤§å®¶å‡†ç¡®ç†è§£ <code>useEffect</code>ï¼Œç¬”è€…å†å•°å—¦ä¸€ä¸‹ï¼Œå°†å…¶æ‰§è¡Œå‘¨æœŸæ‹†è§£åˆ°æ¯æ¬¡æ¸²æŸ“ä¸­ã€‚å‡è®¾ä½ åœ¨ä¸‰ç§’å†…å¿«é€Ÿç‚¹å‡»äº†ä¸‰æ¬¡æŒ‰é’®ï¼Œé‚£ä¹ˆä½ éœ€è¦åœ¨å¤§è„‘ä¸­æ¨¡æ‹Ÿå‡ºä¸‹é¢è¿™ä¸‰æ¬¡æ¸²æŸ“éƒ½å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p><p>ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼Œå…±æ¸²æŸ“äº† 2 æ¬¡ï¼Œ<code>useEffect</code> ç”Ÿæ•ˆåœ¨ç¬¬ <code>2</code> æ¬¡æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> currentCount </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬äºŒæ¬¡æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œä¸€æ¬¡</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">1</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç¬¬äºŒæ¬¡ç‚¹å‡»ï¼Œå…±æ¸²æŸ“äº† 3 æ¬¡ï¼Œ<code>useEffect</code> ç”Ÿæ•ˆåœ¨ç¬¬ <code>3</code> æ¬¡æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token number">2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> currentCount </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬ä¸‰æ¬¡æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œä¸€æ¬¡</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">2</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç¬¬ä¸‰æ¬¡ç‚¹å‡»ï¼Œå…±æ¸²æŸ“äº† 4 æ¬¡ï¼Œ<code>useEffect</code> ç”Ÿæ•ˆåœ¨ç¬¬ <code>4</code> æ¬¡æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> currentCount </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬å››æ¬¡æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œä¸€æ¬¡</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">3</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ³¨æ„å¯¹æ¯”ä¸ä¸Šé¢ç« èŠ‚å±•å¼€çš„ <code>setTimeout</code> æ¸²æŸ“æ—¶æœ‰ä»€ä¹ˆä¸åŒã€‚</p><p>è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>useEffect</code> ä¹Ÿéšç€æ¯æ¬¡æ¸²æŸ“è€Œä¸åŒçš„ï¼Œ<strong>åŒä¸€ä¸ªç»„ä»¶ä¸åŒæ¸²æŸ“ä¹‹é—´ï¼Œ<code>useEffect</code> å†…é—­åŒ…ç¯å¢ƒå®Œå…¨ç‹¬ç«‹</strong>ã€‚å¯¹äºæœ¬æ¬¡çš„ä¾‹å­ï¼Œ<code>useEffect</code> å…±æ‰§è¡Œäº† <strong>å››æ¬¡</strong>ï¼Œç»å†äº†å¦‚ä¸‹å››æ¬¡èµ‹å€¼æœ€ç»ˆå˜æˆ <code>3</code>:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬ 1 æ¬¡æ¸²æŸ“</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬ 2 æ¬¡æ¸²æŸ“</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬ 3 æ¬¡æ¸²æŸ“</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬ 4 æ¬¡æ¸²æŸ“</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¯·ç¡®ä¿ç†è§£äº†è¿™å¥è¯å†ç»§ç»­å¾€ä¸‹é˜…è¯»ï¼š</p><ul><li><strong><code>setTimeout</code> çš„ä¾‹å­ï¼Œä¸‰æ¬¡ç‚¹å‡»è§¦å‘äº†å››æ¬¡æ¸²æŸ“ï¼Œä½† <code>setTimeout</code> åˆ†åˆ«ç”Ÿæ•ˆåœ¨ç¬¬ 1ã€2ã€3 æ¬¡æ¸²æŸ“ä¸­ï¼Œå› æ­¤å€¼æ˜¯ <code>0 1 2</code></strong>ã€‚</li><li><strong><code>useEffect</code> çš„ä¾‹å­ä¸­ï¼Œä¸‰æ¬¡ç‚¹å‡»ä¹Ÿè§¦å‘äº†å››æ¬¡æ¸²æŸ“ï¼Œä½† <code>useEffect</code> åˆ†åˆ«ç”Ÿæ•ˆåœ¨ç¬¬ 1ã€2ã€3ã€4 æ¬¡æ¸²æŸ“ä¸­ï¼Œæœ€ç»ˆä½¿ <code>currentCount</code> çš„å€¼å˜æˆ <code>3</code></strong>ã€‚</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ç”¨è‡ªå®šä¹‰-hook-åŒ…è£…-useref"></a>ç”¨è‡ªå®šä¹‰ Hook åŒ…è£… <code>useRef</code><a class="hash-link" href="#ç”¨è‡ªå®šä¹‰-hook-åŒ…è£…-useref" title="Direct link to heading">#</a></h3><p>æ˜¯ä¸æ˜¯è§‰å¾—æ¯æ¬¡éƒ½å†™ä¸€å † <code>useEffect</code> åŒæ­¥æ•°æ®åˆ° <code>useRef</code> å¾ˆçƒ¦ï¼Ÿæ˜¯çš„ï¼Œæƒ³è¦ç®€åŒ–ï¼Œå°±éœ€è¦å¼•å‡ºä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼š<strong>è‡ªå®šä¹‰ Hooks</strong>ã€‚</p><p>é¦–å…ˆä»‹ç»ä¸€ä¸‹ï¼Œè‡ªå®šä¹‰ Hooks å…è®¸åˆ›å»ºè‡ªå®šä¹‰ Hookï¼Œåªè¦å‡½æ•°åéµå¾ªä»¥ <code>use</code> å¼€å¤´ï¼Œä¸”è¿”å›é JSX å…ƒç´ ï¼Œå°±æ˜¯ Hooks å•¦ï¼<strong>è‡ªå®šä¹‰ Hooks å†…è¿˜å¯ä»¥è°ƒç”¨åŒ…æ‹¬å†…ç½® Hooks åœ¨å†…çš„æ‰€æœ‰è‡ªå®šä¹‰ Hooks</strong>ã€‚</p><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¯ä»¥å°† <code>useEffect</code> å†™åˆ°è‡ªå®šä¹‰ Hook é‡Œï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCurrentValue</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> ref </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">value</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™é‡Œåˆå¼•å‡ºä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œ<strong>å°±æ˜¯ <code>useEffect</code> çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œdependences</strong>ã€‚dependences è¿™ä¸ªå‚æ•°å®šä¹‰äº† <code>useEffect</code> çš„ä¾èµ–ï¼Œåœ¨æ–°çš„æ¸²æŸ“ä¸­ï¼Œåªè¦æ‰€æœ‰ä¾èµ–é¡¹çš„å¼•ç”¨éƒ½ä¸å‘ç”Ÿå˜åŒ–ï¼Œ<code>useEffect</code> å°±ä¸ä¼šè¢«æ‰§è¡Œï¼Œä¸”å½“ä¾èµ–é¡¹ä¸º <code>[]</code> æ—¶ï¼Œ<code>useEffect</code> ä»…åœ¨åˆå§‹åŒ–æ‰§è¡Œä¸€æ¬¡ï¼Œåç»­çš„ Rerender æ°¸è¿œä¹Ÿä¸ä¼šè¢«æ‰§è¡Œã€‚</p><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å‘Šè¯‰ Reactï¼šä»…å½“ <code>value</code> çš„å€¼å˜åŒ–äº†ï¼Œå†å°†å…¶æœ€æ–°å€¼åŒæ­¥ç»™ <code>ref.current</code>ã€‚</p><p>é‚£ä¹ˆè¿™ä¸ªè‡ªå®šä¹‰ Hook å°±å¯ä»¥åœ¨ä»»ä½• Function Component è°ƒç”¨äº†ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> currentCount </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCurrentValue</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">log</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setTimeout</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">currentCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">3000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">You</span><span class="token plain"> clicked </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> times</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">p</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å°è£…ä»¥åä»£ç æ¸…çˆ½äº†å¾ˆå¤šï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯å°†é€»è¾‘å°è£…èµ·æ¥ï¼Œæˆ‘ä»¬åªè¦ç†è§£ <code>useCurrentValue</code> è¿™ä¸ª Hook å¯ä»¥äº§ç”Ÿä¸€ä¸ªå€¼ï¼Œå…¶æœ€æ–°å€¼æ°¸è¿œä¸å…¥å‚åŒæ­¥ã€‚</p><p>çœ‹åˆ°è¿™é‡Œï¼Œä¹Ÿè®¸æœ‰çš„å°ä¼™ä¼´å·²ç»æŒ‰æºä¸ä½è¿¸å‘çš„çµæ„Ÿäº†ï¼š<strong>å°† <code>useEffect</code> ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºç©ºæ•°ç»„ï¼Œè¿™ä¸ªè‡ªå®šä¹‰ Hook å°±ä»£è¡¨äº† <code>didMount</code> ç”Ÿå‘½å‘¨æœŸï¼</strong></p><p>æ˜¯çš„ï¼Œä½†ç¬”è€…å»ºè®®å¤§å®¶ <strong>ä¸è¦å†æƒ³ç”Ÿå‘½å‘¨æœŸçš„äº‹æƒ…</strong>ï¼Œè¿™æ ·ä¼šé˜»ç¢ä½ æ›´å¥½çš„ç†è§£ Function Componentã€‚å› ä¸ºä¸‹ä¸€ä¸ªè¯é¢˜ï¼Œå°±æ˜¯è¦å‘Šè¯‰ä½ ï¼š<strong>æ°¸è¿œè¦å¯¹ <code>useEffect</code> çš„ä¾èµ–è¯šå®ï¼Œè¢«ä¾èµ–çš„å‚æ•°ä¸€å®šè¦å¡«ä¸Šå»ï¼Œå¦åˆ™ä¼šäº§ç”Ÿéå¸¸éš¾ä»¥å¯Ÿè§‰ä¸ä¿®å¤çš„ BUGã€‚</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å°†-settimeout-æ¢æˆ-setinterval-ä¼šæ€æ ·"></a>å°† <code>setTimeout</code> æ¢æˆ <code>setInterval</code> ä¼šæ€æ ·<a class="hash-link" href="#å°†-settimeout-æ¢æˆ-setinterval-ä¼šæ€æ ·" title="Direct link to heading">#</a></h3><p>æˆ‘ä»¬å›åˆ°èµ·ç‚¹ï¼Œå°†ç¬¬ä¸€ä¸ª <code>setTimeout</code> Demo ä¸­æ¢æˆ <code>setInterval</code>ï¼Œçœ‹çœ‹ä¼šå¦‚ä½•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">clearInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>è¿™ä¸ªä¾‹å­å°†å¼•å‘å­¦ä¹  Function Component çš„ç¬¬äºŒä¸ªæ‹¦è·¯è™ï¼Œç†è§£äº†å®ƒï¼Œæ‰æ·±å…¥ç†è§£äº† Function Component çš„æ¸²æŸ“åŸç†ã€‚</strong></p><p>é¦–å…ˆä»‹ç»ä¸€ä¸‹å¼•å…¥çš„æ–°æ¦‚å¿µï¼Œ<strong><code>useEffect</code> å‡½æ•°çš„è¿”å›å€¼</strong>ã€‚å®ƒçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨ <code>useEffect</code> å³å°†é‡æ–°æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆæ‰§è¡Œä¸Šä¸€æ¬¡ Rerender <code>useEffect</code> ç¬¬ä¸€ä¸ªå›è°ƒçš„è¿”å›å‡½æ•°ï¼Œå†æ‰§è¡Œä¸‹ä¸€æ¬¡æ¸²æŸ“çš„ <code>useEffect</code> ç¬¬ä¸€ä¸ªå›è°ƒã€‚</p><p>ä»¥ä¸¤æ¬¡è¿ç»­æ¸²æŸ“ä¸ºä¾‹ä»‹ç»ï¼Œå±•å¼€åçš„æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š</p><p>ç¬¬ä¸€æ¬¡æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬ä¸€æ¬¡æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œ</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// æœ€ç»ˆæ‰§è¡Œé¡ºåºï¼š1</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç”±äºæ²¡æœ‰å¡«å†™ä¾èµ–é¡¹ï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡æ¸²æŸ“ useEffect ä¼šå†æ¬¡æ‰§è¡Œï¼Œåœ¨æ‰§è¡Œå‰ï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“ä¸­è¿™ä¸ªåœ°æ–¹çš„å›è°ƒå‡½æ•°ä¼šé¦–å…ˆè¢«è°ƒç”¨</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)">// æœ€ç»ˆæ‰§è¡Œé¡ºåºï¼š2</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç¬¬äºŒæ¬¡æ¸²æŸ“ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ç¬¬äºŒæ¬¡æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œ</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// æœ€ç»ˆæ‰§è¡Œé¡ºåºï¼š3</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token comment" style="color:rgb(106, 153, 85)">// ä¾æ­¤ç±»æ¨</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><strong>ç„¶è€Œæœ¬ Demo å°† <code>useEffect</code> çš„ç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºäº† <code>[]</code>ï¼Œé‚£ä¹ˆå…¶è¿”å›å‡½æ•°åªä¼šåœ¨è¿™ä¸ªç»„ä»¶è¢«é”€æ¯æ—¶æ‰§è¡Œ</strong>ã€‚</p><p>è¯»æ‡‚äº†å‰é¢çš„ä¾‹å­ï¼Œåº”è¯¥èƒ½æƒ³åˆ°ï¼Œè¿™ä¸ª Demo å¸Œæœ›åˆ©ç”¨ <code>[]</code> ä¾èµ–ï¼Œå°† <code>useEffect</code> å½“ä½œ <code>didMount</code> ä½¿ç”¨ï¼Œå†ç»“åˆ <code>setInterval</code> æ¯æ¬¡æ—¶ <code>count</code> è‡ªå¢ï¼Œè¿™æ ·æœŸæœ›å°† <code>count</code> çš„å€¼æ¯ç§’è‡ªå¢ 1ã€‚</p><p>ç„¶è€Œç»“æœæ˜¯ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç†è§£äº† <code>setTimeout</code> ä¾‹å­çš„è¯»è€…åº”è¯¥å¯ä»¥è‡ªè¡Œæ¨å¯¼å‡ºåŸå› ï¼š<code>setInterval</code> æ°¸è¿œåœ¨ç¬¬ä¸€æ¬¡ Render çš„é—­åŒ…ä¸­ï¼Œ<code>count</code> çš„å€¼æ°¸è¿œæ˜¯ <code>0</code>ï¼Œä¹Ÿå°±æ˜¯ç­‰ä»·äºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">clearInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç„¶è€Œç½ªé­ç¥¸é¦–å°±æ˜¯ <strong>æ²¡æœ‰å¯¹ä¾èµ–è¯šå®</strong> å¯¼è‡´çš„ã€‚ä¾‹å­ä¸­ <code>useEffect</code> æ˜æ˜ä¾èµ–äº† <code>count</code>ï¼Œä¾èµ–é¡¹å´éè¦å†™ <code>[]</code>ï¼Œæ‰€ä»¥äº§ç”Ÿäº†å¾ˆéš¾ç†è§£çš„é”™è¯¯ã€‚</p><p>æ‰€ä»¥æ”¹æ­£çš„åŠæ³•å°±æ˜¯ <strong>å¯¹ä¾èµ–è¯šå®</strong>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="æ°¸è¿œå¯¹ä¾èµ–é¡¹è¯šå®"></a>æ°¸è¿œå¯¹ä¾èµ–é¡¹è¯šå®<a class="hash-link" href="#æ°¸è¿œå¯¹ä¾èµ–é¡¹è¯šå®" title="Direct link to heading">#</a></h3><p>ä¸€æ—¦æˆ‘ä»¬å¯¹ä¾èµ–è¯šå®äº†ï¼Œå°±å¯ä»¥å¾—åˆ°æ­£ç¡®çš„æ•ˆæœï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">clearInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æˆ‘ä»¬å°† <code>count</code> ä½œä¸ºäº† <code>useEffect</code> çš„ä¾èµ–é¡¹ï¼Œå°±å¾—åˆ°äº†æ­£ç¡®çš„ç»“æœï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly plain"><div tabindex="0" class="prism-code language-plain codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">1</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">2</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">3</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ—¢ç„¶æ¼å†™ä¾èµ–çš„é£é™©è¿™ä¹ˆå¤§ï¼Œè‡ªç„¶ä¹Ÿæœ‰ä¿æŠ¤æªæ–½ï¼Œé‚£å°±æ˜¯ <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="noopener noreferrer">eslint-plugin-react-hooks</a> è¿™ä¸ªæ’ä»¶ï¼Œä¼šè‡ªåŠ¨è®¢æ­£ä½ çš„ä»£ç ä¸­çš„ä¾èµ–ï¼Œæƒ³ä¸å¯¹ä¾èµ–è¯šå®éƒ½ä¸è¡Œï¼</p><p>ç„¶è€Œå¯¹è¿™ä¸ªä¾‹å­è€Œè¨€ï¼Œä»£ç ä¾ç„¶å­˜åœ¨ BUGï¼šæ¯æ¬¡è®¡æ•°å™¨éƒ½ä¼šé‡æ–°å®ä¾‹åŒ–ï¼Œå¦‚æœæ¢æˆå…¶ä»–è´¹äº‹æ“ä½œï¼Œæ€§èƒ½æˆæœ¬å°†ä¸å¯æ¥å—ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å¦‚ä½•ä¸åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°å®ä¾‹åŒ–-setinterval"></a>å¦‚ä½•ä¸åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°å®ä¾‹åŒ– <code>setInterval</code>?<a class="hash-link" href="#å¦‚ä½•ä¸åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°å®ä¾‹åŒ–-setinterval" title="Direct link to heading">#</a></h3><p>æœ€ç®€å•çš„åŠæ³•ï¼Œå°±æ˜¯åˆ©ç”¨ <code>useState</code> çš„ç¬¬äºŒç§èµ‹å€¼ç”¨æ³•ï¼Œä¸ç›´æ¥ä¾èµ– <code>count</code>ï¼Œè€Œæ˜¯ä»¥å‡½æ•°å›è°ƒæ–¹å¼è¿›è¡Œèµ‹å€¼ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">c</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">clearInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™è¿™å†™æ³•çœŸæ­£åšåˆ°äº†ï¼š</p><ol><li>ä¸ä¾èµ– <code>count</code>ï¼Œæ‰€ä»¥å¯¹ä¾èµ–è¯šå®ã€‚</li><li>ä¾èµ–é¡¹ä¸º <code>[]</code>ï¼Œåªæœ‰åˆå§‹åŒ–ä¼šå¯¹ <code>setInterval</code> è¿›è¡Œå®ä¾‹åŒ–ã€‚</li></ol><p>è€Œä¹‹æ‰€ä»¥è¾“å‡ºè¿˜æ˜¯æ­£ç¡®çš„ <code>1 2 3 ...</code>ï¼ŒåŸå› æ˜¯ <code>setCount</code> çš„å›è°ƒå‡½æ•°ä¸­ï¼Œ<code>c</code> å€¼æ°¸è¿œæŒ‡å‘æœ€æ–°çš„ <code>count</code> å€¼ï¼Œå› æ­¤æ²¡æœ‰é€»è¾‘æ¼æ´ã€‚</p><p>ä½†æ˜¯èªæ˜çš„åŒå­¦ä»”ç»†ä¸€æƒ³ï¼Œå°±ä¼šå‘ç°ä¸€ä¸ªæ–°é—®é¢˜ï¼šå¦‚æœå­˜åœ¨ä¸¤ä¸ªä»¥ä¸Šå˜é‡éœ€è¦ä½¿ç”¨æ—¶ï¼Œè¿™æ‹›å°±æ²¡æœ‰ç”¨æ­¦ä¹‹åœ°äº†ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šå˜é‡æ—¶ï¼Ÿ"></a>åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šå˜é‡æ—¶ï¼Ÿ<a class="hash-link" href="#åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šå˜é‡æ—¶ï¼Ÿ" title="Direct link to heading">#</a></h3><p>å¦‚æœåŒæ—¶éœ€è¦å¯¹ <code>count</code> ä¸ <code>step</code> ä¸¤ä¸ªå˜é‡åšç´¯åŠ ï¼Œé‚£ <code>useEffect</code> çš„ä¾èµ–å¿…ç„¶è¦å†™ä¸Šä¸€ç§æŸä¸€ä¸ªå€¼ï¼Œé¢‘ç¹å®ä¾‹åŒ–çš„é—®é¢˜å°±åˆå‡ºç°äº†ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">c</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">clearInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äº <code>setCount</code> åªèƒ½æ‹¿åˆ°æœ€æ–°çš„ <code>count</code> å€¼ï¼Œè€Œä¸ºäº†æ¯æ¬¡éƒ½æ‹¿åˆ°æœ€æ–°çš„ <code>step</code> å€¼ï¼Œå°±å¿…é¡»å°† <code>step</code> ç”³æ˜åˆ° <code>useEffect</code> ä¾èµ–ä¸­ï¼Œå¯¼è‡´ <code>setInterval</code> è¢«é¢‘ç¹å®ä¾‹åŒ–ã€‚</p><p>è¿™ä¸ªé—®é¢˜è‡ªç„¶ä¹Ÿå›°æ‰°äº† React å›¢é˜Ÿï¼Œæ‰€ä»¥ä»–ä»¬æ‹¿å‡ºäº†ä¸€ä¸ªæ–°çš„ Hook è§£å†³é—®é¢˜ï¼š<code>useReducer</code>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä»€ä¹ˆæ˜¯-usereducer"></a>ä»€ä¹ˆæ˜¯ useReducer<a class="hash-link" href="#ä»€ä¹ˆæ˜¯-usereducer" title="Direct link to heading">#</a></h3><p>å…ˆåˆ«è”æƒ³åˆ° Reduxã€‚åªè€ƒè™‘ä¸Šé¢çš„åœºæ™¯ï¼Œçœ‹çœ‹ä¸ºä»€ä¹ˆ React å›¢é˜Ÿè¦å°† <code>useReducer</code> åˆ—ä¸ºå†…ç½® Hooks ä¹‹ä¸€ã€‚</p><p>å…ˆä»‹ç»ä¸€ä¸‹ <code>useReducer</code> çš„ç”¨æ³•:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useReducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">reducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> initialState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>useReducer</code> è¿”å›çš„ç»“æ„ä¸ <code>useState</code> å¾ˆåƒï¼Œåªæ˜¯æ•°ç»„ç¬¬äºŒé¡¹æ˜¯ <code>dispatch</code>ï¼Œè€Œæ¥æ”¶çš„å‚æ•°ä¹Ÿæœ‰ä¸¤ä¸ªï¼Œåˆå§‹å€¼æ”¾åœ¨ç¬¬äºŒä½ï¼Œç¬¬ä¸€ä½å°±æ˜¯ <code>reducer</code>ã€‚</p><p><code>reducer</code> å®šä¹‰äº†å¦‚ä½•å¯¹æ•°æ®è¿›è¡Œå˜æ¢ï¼Œæ¯”å¦‚ä¸€ä¸ªç®€å•çš„ <code>reducer</code> å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">reducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">action</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">case</span><span class="token plain"> </span><span class="token string">&quot;increment&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword module" style="color:#e3116c">default</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™æ ·å°±å¯ä»¥é€šè¿‡è°ƒç”¨ <code>dispatch({ type: &#x27;increment&#x27; })</code> çš„æ–¹å¼å®ç° <code>count</code> è‡ªå¢äº†ã€‚</p><p>é‚£ä¹ˆå›åˆ°è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬åªéœ€è¦ç¨å¾®æ”¹å†™ä¸€ä¸‹ç”¨æ³•å³å¯ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useReducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">reducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> initialState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> id </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&quot;tick&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">clearInterval</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">reducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">action</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">case</span><span class="token plain"> </span><span class="token string">&quot;tick&quot;</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">step</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡ <code>reducer</code> çš„ <code>tick</code> ç±»å‹å®Œæˆäº†å¯¹ <code>count</code> çš„ç´¯åŠ ï¼Œè€Œåœ¨ <code>useEffect</code> çš„å‡½æ•°ä¸­ï¼Œç«Ÿç„¶å®Œå…¨ç»•è¿‡äº† <code>count</code>ã€<code>step</code> è¿™ä¸¤ä¸ªå˜é‡ã€‚æ‰€ä»¥ <code>useReducer</code> ä¹Ÿè¢«ç§°ä¸ºè§£å†³æ­¤ç±»é—®é¢˜çš„ â€œé»‘é­”æ³•â€ã€‚</p><p>å…¶å®ä¸ç®¡è¢«æ€ä¹ˆç§°å‘¼ä¹Ÿå¥½ï¼Œå…¶æœ¬è´¨æ˜¯è®©å‡½æ•°ä¸æ•°æ®è§£è€¦ï¼Œ<strong>å‡½æ•°åªç®¡å‘å‡ºæŒ‡ä»¤ï¼Œè€Œä¸éœ€è¦å…³å¿ƒä½¿ç”¨çš„æ•°æ®è¢«æ›´æ–°æ—¶ï¼Œéœ€è¦é‡æ–°åˆå§‹åŒ–è‡ªèº«ã€‚</strong></p><p>ä»”ç»†çš„è¯»è€…ä¼šå‘ç°è¿™ä¸ªä¾‹å­è¿˜æ˜¯æœ‰ä¸€ä¸ªä¾èµ–çš„ï¼Œé‚£å°±æ˜¯ <code>dispatch</code>ï¼Œç„¶è€Œ <code>dispatch</code> å¼•ç”¨æ°¸è¿œä¹Ÿä¸ä¼šå˜ï¼Œå› æ­¤å¯ä»¥å¿½ç•¥å®ƒçš„å½±å“ã€‚<strong>è¿™ä¹Ÿä½“ç°äº†æ— è®ºå¦‚ä½•éƒ½è¦å¯¹ä¾èµ–ä¿æŒè¯šå®ã€‚</strong></p><p>è¿™ä¹Ÿå¼•å‘äº†å¦ä¸€ä¸ªæ³¨æ„é¡¹ï¼š<strong>å°½é‡å°†å‡½æ•°å†™åœ¨ <code>useEffect</code> å†…éƒ¨</strong>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å°†å‡½æ•°å†™åœ¨-useeffect-å†…éƒ¨"></a>å°†å‡½æ•°å†™åœ¨ <code>useEffect</code> å†…éƒ¨<a class="hash-link" href="#å°†å‡½æ•°å†™åœ¨-useeffect-å†…éƒ¨" title="Direct link to heading">#</a></h3><p>ä¸ºäº†é¿å…é—æ¼ä¾èµ–ï¼Œå¿…é¡»å°†å‡½æ•°å†™åœ¨ <code>useEffect</code> å†…éƒ¨ï¼Œè¿™æ · <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="noopener noreferrer">eslint-plugin-react-hooks</a> æ‰èƒ½é€šè¿‡é™æ€åˆ†æè¡¥é½ä¾èµ–é¡¹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">getFetchUrl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token string">&quot;https://v?query=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">getFetchUrl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p><code>getFetchUrl</code> è¿™ä¸ªå‡½æ•°ä¾èµ–äº† <code>count</code>ï¼Œè€Œå¦‚æœå°†è¿™ä¸ªå‡½æ•°å®šä¹‰åœ¨ <code>useEffect</code> å¤–éƒ¨ï¼Œæ— è®ºæ˜¯æœºå™¨è¿˜æ˜¯äººçœ¼éƒ½éš¾ä»¥çœ‹å‡º <code>useEffect</code> çš„ä¾èµ–é¡¹åŒ…å« <code>count</code>ã€‚</p><p>ç„¶è€Œè¿™å°±å¼•å‘äº†ä¸€ä¸ªæ–°é—®é¢˜ï¼šå°†æ‰€æœ‰å‡½æ•°éƒ½å†™åœ¨ <code>useEffect</code> å†…éƒ¨å²‚ä¸æ˜¯éå¸¸éš¾ä»¥ç»´æŠ¤ï¼Ÿ</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å¦‚ä½•å°†å‡½æ•°æŠ½åˆ°-useeffect-å¤–éƒ¨ï¼Ÿ"></a>å¦‚ä½•å°†å‡½æ•°æŠ½åˆ° <code>useEffect</code> å¤–éƒ¨ï¼Ÿ<a class="hash-link" href="#å¦‚ä½•å°†å‡½æ•°æŠ½åˆ°-useeffect-å¤–éƒ¨ï¼Ÿ" title="Direct link to heading">#</a></h3><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è¦å¼•å…¥ä¸€ä¸ªæ–°çš„ Hookï¼š<code>useCallback</code>ï¼Œå®ƒå°±æ˜¯è§£å†³å°†å‡½æ•°æŠ½åˆ° <code>useEffect</code> å¤–éƒ¨çš„é—®é¢˜ã€‚</p><p>æˆ‘ä»¬å…ˆçœ‹ <code>useCallback</code> çš„ç”¨æ³•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Counter</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> getFetchUrl </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token string">&quot;https://v?query=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">getFetchUrl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">getFetchUrl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">h1</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>useCallback</code> ä¹Ÿæœ‰ç¬¬äºŒä¸ªå‚æ•° - ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬å°† <code>getFetchUrl</code> å‡½æ•°çš„ä¾èµ–é¡¹é€šè¿‡ <code>useCallback</code> æ‰“åŒ…åˆ°æ–°çš„ <code>getFetchUrl</code> å‡½æ•°ä¸­ï¼Œé‚£ä¹ˆ <strong><code>useEffect</code> å°±åªéœ€è¦ä¾èµ– <code>getFetchUrl</code> è¿™ä¸ªå‡½æ•°ï¼Œå°±å®ç°äº†å¯¹ <code>count</code> çš„é—´æ¥ä¾èµ–ã€‚</strong></p><p>æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬åˆ©ç”¨äº† <code>useCallback</code> å°† <code>getFetchUrl</code> å‡½æ•°æŠ½åˆ°äº† <code>useEffect</code> å¤–éƒ¨ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä¸ºä»€ä¹ˆ-usecallback-æ¯”-componentdidupdate-æ›´å¥½ç”¨"></a>ä¸ºä»€ä¹ˆ <code>useCallback</code> æ¯” <code>componentDidUpdate</code> æ›´å¥½ç”¨<a class="hash-link" href="#ä¸ºä»€ä¹ˆ-usecallback-æ¯”-componentdidupdate-æ›´å¥½ç”¨" title="Direct link to heading">#</a></h3><p>å›å¿†ä¸€ä¸‹ Class Component çš„æ¨¡å¼ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•åœ¨å‡½æ•°å‚æ•°å˜åŒ–æ—¶è¿›è¡Œé‡æ–°å–æ•°çš„ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Parent</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  state </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    step</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">fetchData</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token string">&quot;https://v?query=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token string">&quot;&amp;step=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">render</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Child</span><span class="token plain"> fetchData</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> count</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> step</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Child</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Component</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  state </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    data</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#e3116c">null</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">componentDidMount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">componentDidUpdate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">prevProps</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">!==</span><span class="token plain"> prevProps</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&amp;&amp;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">step</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">!==</span><span class="token plain"> prevProps</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">step</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// åˆ«æ¼äº†ï¼</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">render</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸Šé¢çš„ä»£ç ç»å¸¸ç”¨ Class Component çš„äººåº”è¯¥å¾ˆç†Ÿæ‚‰ï¼Œç„¶è€Œæš´éœ²çš„é—®é¢˜å¯ä¸å°ã€‚</p><p>æˆ‘ä»¬éœ€è¦ç†è§£ <strong><code>props.count</code> <code>props.step</code> è¢« <code>props.fetchData</code> å‡½æ•°ä½¿ç”¨äº†ï¼Œå› æ­¤åœ¨ <code>componentDidUpdate</code> æ—¶ï¼Œåˆ¤æ–­è¿™ä¸¤ä¸ªå‚æ•°å‘ç”Ÿäº†å˜åŒ–å°±è§¦å‘é‡æ–°å–æ•°ã€‚</strong></p><p>ç„¶è€Œé—®é¢˜æ˜¯ï¼Œè¿™ç§ç†è§£æˆæœ¬æ˜¯ä¸æ˜¯è¿‡é«˜äº†ï¼Ÿå¦‚æœçˆ¶çº§å‡½æ•° <code>fetchData</code> ä¸æ˜¯æˆ‘å†™çš„ï¼Œåœ¨ä¸è¯»æºç çš„æƒ…å†µä¸‹ï¼Œæˆ‘æ€ä¹ˆçŸ¥é“å®ƒä¾èµ–äº† <code>props.count</code> ä¸ <code>props.step</code> å‘¢ï¼Ÿ<strong>æ›´ä¸¥é‡çš„æ˜¯ï¼Œå¦‚æœæŸä¸€å¤© <code>fetchData</code> å¤šä¾èµ–äº† <code>params</code> è¿™ä¸ªå‚æ•°ï¼Œä¸‹æ¸¸å‡½æ•°å°†éœ€è¦å…¨éƒ¨åœ¨ <code>componentDidUpdate</code> è¦†ç›–åˆ°è¿™ä¸ªé€»è¾‘ï¼Œå¦åˆ™ <code>params</code> å˜åŒ–æ—¶å°†ä¸ä¼šé‡æ–°å–æ•°</strong>ã€‚å¯ä»¥æƒ³è±¡ï¼Œè¿™ç§æ–¹å¼ç»´æŠ¤æˆæœ¬å·¨å¤§ï¼Œç”šè‡³å¯ä»¥è¯´å‡ ä¹æ— æ³•ç»´æŠ¤ã€‚</p><p>æ¢æˆ Function Component çš„æ€ç»´å§ï¼è¯•ç€ç”¨ä¸Šåˆšæ‰æåˆ°çš„ <code>useCallback</code> è§£å†³é—®é¢˜ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Parent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount </span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setStep </span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> fetchData </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token string">&#x27;https://v/search?query=&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token string">&quot;&amp;step=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Child</span><span class="token plain"> fetchData</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Child</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥çœ‹å‡ºæ¥ï¼Œå½“ <code>fetchData</code> çš„ä¾èµ–å˜åŒ–åï¼ŒæŒ‰ä¸‹ä¿å­˜é”®ï¼Œ<a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="noopener noreferrer">eslint-plugin-react-hooks</a> ä¼šè‡ªåŠ¨è¡¥ä¸Šæ›´æ–°åçš„ä¾èµ–ï¼Œ<strong>è€Œä¸‹æ¸¸çš„ä»£ç ä¸éœ€è¦åšä»»ä½•æ”¹å˜ï¼Œä¸‹æ¸¸åªéœ€è¦å…³å¿ƒä¾èµ–äº† <code>fetchData</code> è¿™ä¸ªå‡½æ•°å³å¯ï¼Œè‡³äºè¿™ä¸ªå‡½æ•°ä¾èµ–äº†ä»€ä¹ˆï¼Œå·²ç»å°è£…åœ¨ <code>useCallback</code> åæ‰“åŒ…é€ä¼ ä¸‹æ¥äº†ã€‚</strong></p><p>ä¸ä»…è§£å†³äº†ç»´æŠ¤æ€§é—®é¢˜ï¼Œè€Œä¸”å¯¹äº <strong>åªè¦å‚æ•°å˜åŒ–ï¼Œå°±é‡æ–°æ‰§è¡ŒæŸé€»è¾‘ï¼Œæ˜¯ç‰¹åˆ«é€‚åˆç”¨ <code>useEffect</code> åšçš„ï¼Œä½¿ç”¨è¿™ç§æ€ç»´æ€è€ƒé—®é¢˜ä¼šè®©ä½ çš„ä»£ç æ›´ â€œæ™ºèƒ½â€ï¼Œè€Œä½¿ç”¨åˆ†è£‚çš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ€è€ƒï¼Œä¼šè®©ä½ çš„ä»£ç å››åˆ†äº”è£‚ï¼Œè€Œä¸”å®¹æ˜“æ¼æ‰å„ç§æ—¶æœºã€‚</strong></p><p><code>useEffect</code> å¯¹ä¸šåŠ¡çš„æŠ½è±¡éå¸¸æ–¹ä¾¿ï¼Œç¬”è€…ä¸¾å‡ ä¸ªä¾‹å­ï¼š</p><ol><li>ä¾èµ–é¡¹æ˜¯æŸ¥è¯¢å‚æ•°ï¼Œé‚£ä¹ˆ <code>useEffect</code> å†…å¯ä»¥è¿›è¡Œå–æ•°è¯·æ±‚ï¼Œé‚£ä¹ˆåªè¦æŸ¥è¯¢å‚æ•°å˜åŒ–äº†ï¼Œåˆ—è¡¨å°±ä¼šè‡ªåŠ¨å–æ•°åˆ·æ–°ã€‚æ³¨æ„æˆ‘ä»¬å°†å–æ•°æ—¶æœºä»è§¦å‘ç«¯æ”¹æˆäº†æ¥æ”¶ç«¯ã€‚</li><li>å½“åˆ—è¡¨æ›´æ–°åï¼Œé‡æ–°æ³¨å†Œä¸€éæ‹–æ‹½å“åº”äº‹ä»¶ã€‚ä¹Ÿæ˜¯åŒç†ï¼Œä¾èµ–å‚æ•°æ˜¯åˆ—è¡¨ï¼Œåªè¦åˆ—è¡¨å˜åŒ–ï¼Œæ‹–æ‹½å“åº”å°±ä¼šé‡æ–°åˆå§‹åŒ–ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥æ”¾å¿ƒçš„ä¿®æ”¹åˆ—è¡¨ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ‹–æ‹½äº‹ä»¶å¤±æ•ˆã€‚</li><li>åªè¦æ•°æ®æµæŸä¸ªæ•°æ®å˜åŒ–ï¼Œé¡µé¢æ ‡é¢˜å°±åŒæ­¥ä¿®æ”¹ã€‚åŒç†ï¼Œä¹Ÿä¸éœ€è¦åœ¨æ¯æ¬¡æ•°æ®å˜åŒ–æ—¶ä¿®æ”¹æ ‡é¢˜ï¼Œè€Œæ˜¯é€šè¿‡ <code>useEffect</code> â€œç›‘å¬â€ æ•°æ®çš„å˜åŒ–ï¼Œè¿™æ˜¯ä¸€ç§ <strong>â€œæ§åˆ¶åè½¬â€</strong> çš„æ€ç»´ã€‚</li></ol><p>è¯´äº†è¿™ä¹ˆå¤šï¼Œå…¶æœ¬è´¨è¿˜æ˜¯åˆ©ç”¨äº† <code>useCallback</code> å°†å‡½æ•°ç‹¬ç«‹æŠ½ç¦»åˆ° <code>useEffect</code> å¤–éƒ¨ã€‚</p><p>é‚£ä¹ˆè¿›ä¸€æ­¥æ€è€ƒï¼Œ<strong>å¯ä»¥å°†å‡½æ•°æŠ½ç¦»åˆ°æ•´ä¸ªç»„ä»¶çš„å¤–éƒ¨å—ï¼Ÿ</strong></p><p>è¿™ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œéœ€è¦çµæ´»è¿ç”¨è‡ªå®šä¹‰ Hooks å®ç°ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å°†å‡½æ•°æŠ½åˆ°ç»„ä»¶å¤–éƒ¨"></a>å°†å‡½æ•°æŠ½åˆ°ç»„ä»¶å¤–éƒ¨<a class="hash-link" href="#å°†å‡½æ•°æŠ½åˆ°ç»„ä»¶å¤–éƒ¨" title="Direct link to heading">#</a></h3><p>ä»¥ä¸Šé¢çš„ <code>fetchData</code> å‡½æ•°ä¸ºä¾‹ï¼Œå¦‚æœè¦æŠ½åˆ°æ•´ä¸ªç»„ä»¶çš„å¤–éƒ¨ï¼Œå°±ä¸æ˜¯åˆ©ç”¨ <code>useCallback</code> åšåˆ°äº†ï¼Œè€Œæ˜¯åˆ©ç”¨è‡ªå®šä¹‰ Hooks æ¥åšï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useFetch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">count</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token string">&quot;https://v/search?query=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token string">&quot;&amp;step=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å°† <code>useCallback</code> æ‰“åŒ…æ¬åˆ°äº†è‡ªå®šä¹‰ Hook <code>useFetch</code> ä¸­ï¼Œé‚£ä¹ˆå‡½æ•°ä¸­åªéœ€è¦ä¸€è¡Œä»£ç å°±èƒ½å®ç°ä¸€æ ·çš„æ•ˆæœäº†ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Parent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setOther</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> fetch </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useFetch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// å°è£…äº† useFetch</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">fetch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">fetch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">c</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain">setCount </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">c</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain">setStep </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setOther</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">c</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain">setOther </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>éšç€ä½¿ç”¨è¶Šæ¥è¶Šæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç²¾åŠ›æ”¾åˆ°æ€§èƒ½ä¸Šã€‚è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œ<code>count</code> ä¸ <code>step</code> éƒ½ä¼šé¢‘ç¹å˜åŒ–ï¼Œæ¯æ¬¡å˜åŒ–å°±ä¼šå¯¼è‡´ <code>useFetch</code> ä¸­ <code>useCallback</code> ä¾èµ–çš„å˜åŒ–ï¼Œè¿›è€Œå¯¼è‡´é‡æ–°ç”Ÿæˆå‡½æ•°ã€‚ç„¶è€Œå®é™…ä¸Šè¿™ç§å‡½æ•°æ˜¯æ²¡å¿…è¦æ¯æ¬¡éƒ½é‡æ–°ç”Ÿæˆçš„ï¼Œåå¤ç”Ÿæˆå‡½æ•°ä¼šé€ æˆå¤§é‡æ€§èƒ½æŸè€—ã€‚</p><p>æ¢ä¸€ä¸ªä¾‹å­å°±å¯ä»¥çœ‹å¾—æ›´æ¸…æ¥šï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Parent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">other</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setOther</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> drag </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useDraggable</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">dom</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// å°è£…äº†æ‹–æ‹½å‡½æ•°</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// dom å˜åŒ–æ—¶é‡æ–°å®ä¾‹åŒ–</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">drag</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">drag</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å‡è®¾æˆ‘ä»¬ä½¿ç”¨ <a href="https://github.com/SortableJS/Sortable" target="_blank" rel="noopener noreferrer">Sortablejs</a> å¯¹æŸä¸ªåŒºåŸŸè¿›è¡Œæ‹–æ‹½ç›‘å¬ï¼Œè¿™ä¸ªå‡½æ•°æ¯æ¬¡éƒ½é‡å¤æ‰§è¡Œçš„æ€§èƒ½æŸè€—éå¸¸å¤§ï¼Œ<strong>ç„¶è€Œè¿™ä¸ªå‡½æ•°å†…éƒ¨å¯èƒ½å› ä¸ºä»…ä»…è¦ä¸ŠæŠ¥ä¸€äº›æ—¥å¿—ï¼Œæ‰€ä»¥ä¾èµ–äº†æ²¡æœ‰å®é™…è¢«ä½¿ç”¨çš„ <code>count</code> <code>step</code> å˜é‡ï¼š</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useDraggable</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">dom</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> count</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ä¸ŠæŠ¥æ—¥å¿—</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">report</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// å¯¹åŒºåŸŸè¿›è¡Œåˆå§‹åŒ–ï¼Œéå¸¸è€—æ—¶</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ... çœç•¥è€—æ—¶ä»£ç </span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">dom</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ç§æƒ…å†µï¼Œå‡½æ•°çš„ä¾èµ–å°±ç‰¹åˆ«ä¸åˆç†ã€‚<strong>è™½ç„¶ä¾èµ–å˜åŒ–åº”è¯¥è§¦å‘å‡½æ•°é‡æ–°æ‰§è¡Œï¼Œä½†å¦‚æœå‡½æ•°é‡æ–°æ‰§è¡Œçš„æˆæœ¬éå¸¸é«˜ï¼Œè€Œä¾èµ–åªæ˜¯å¯æœ‰å¯æ— çš„ç‚¹ç¼€ï¼Œå¾—ä¸å¿å¤±ã€‚</strong></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="åˆ©ç”¨-ref-ä¿è¯è€—æ—¶å‡½æ•°ä¾èµ–ä¸å˜"></a>åˆ©ç”¨ Ref ä¿è¯è€—æ—¶å‡½æ•°ä¾èµ–ä¸å˜<a class="hash-link" href="#åˆ©ç”¨-ref-ä¿è¯è€—æ—¶å‡½æ•°ä¾èµ–ä¸å˜" title="Direct link to heading">#</a></h3><p>ä¸€ç§åŠæ³•æ˜¯é€šè¿‡å°†ä¾èµ–è½¬åŒ–ä¸º Refï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useFetch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">count</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> countRef </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> stepRef </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    countRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    stepRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> url </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token string">&quot;https://v/search?query=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> countRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token string">&quot;&amp;step=&quot;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> stepRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">countRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> stepRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(106, 153, 85)">// ä¾èµ–ä¸ä¼šå˜ï¼Œå´èƒ½æ¯æ¬¡æ‹¿åˆ°æœ€æ–°çš„å€¼</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ç§æ–¹å¼æ¯”è¾ƒå–å·§ï¼Œ<strong>å°†éœ€è¦æ›´æ–°çš„åŒºåŸŸä¸è€—æ—¶åŒºåŸŸåˆ†ç¦»ï¼Œ</strong>å†å°†éœ€æ›´æ–°çš„å†…å®¹é€šè¿‡ Ref æä¾›ç»™è€—æ—¶çš„åŒºåŸŸï¼Œå®ç°æ€§èƒ½ä¼˜åŒ–ã€‚</p><p>ç„¶è€Œè¿™æ ·åšå¯¹å‡½æ•°çš„æ”¹åŠ¨æˆæœ¬æ¯”è¾ƒé«˜ï¼Œæœ‰ä¸€ç§æ›´é€šç”¨çš„åšæ³•è§£å†³æ­¤ç±»é—®é¢˜ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="é€šç”¨çš„è‡ªå®šä¹‰-hooks-è§£å†³å‡½æ•°é‡æ–°å®ä¾‹åŒ–é—®é¢˜"></a>é€šç”¨çš„è‡ªå®šä¹‰ Hooks è§£å†³å‡½æ•°é‡æ–°å®ä¾‹åŒ–é—®é¢˜<a class="hash-link" href="#é€šç”¨çš„è‡ªå®šä¹‰-hooks-è§£å†³å‡½æ•°é‡æ–°å®ä¾‹åŒ–é—®é¢˜" title="Direct link to heading">#</a></h3><p>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>useRef</code> åˆ›é€ ä¸€ä¸ªè‡ªå®šä¹‰ Hook ä»£æ›¿ <code>useCallback</code>ï¼Œ<strong>ä½¿å…¶ä¾èµ–çš„å€¼å˜åŒ–æ—¶ï¼Œå›è°ƒä¸ä¼šé‡æ–°æ‰§è¡Œï¼Œå´èƒ½æ‹¿åˆ°æœ€æ–°çš„å€¼ï¼</strong></p><p>è¿™ä¸ªç¥å¥‡çš„ Hook å†™æ³•å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useEventCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">fn</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> dependencies</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> ref </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token keyword null nil" style="color:#e3116c">null</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> fn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">fn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain">dependencies</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> fn </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å†æ¬¡ä½“ä¼šåˆ°è‡ªå®šä¹‰ Hook çš„æ— æ‰€ä¸èƒ½ã€‚</p><p>é¦–å…ˆçœ‹è¿™ä¸€æ®µï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> fn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">fn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain">dependencies</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å½“ <code>fn</code> å›è°ƒå‡½æ•°å˜åŒ–æ—¶ï¼Œ <code>ref.current</code> é‡æ–°æŒ‡å‘æœ€æ–°çš„ <code>fn</code> è¿™ä¸ªé€»è¾‘ä¸­è§„ä¸­çŸ©ã€‚é‡ç‚¹æ˜¯ï¼Œå½“ä¾èµ– <code>dependencies</code> å˜åŒ–æ—¶ï¼Œä¹Ÿé‡æ–°ä¸º <code>ref.current</code> èµ‹å€¼ï¼Œæ­¤æ—¶ <code>fn</code> å†…éƒ¨çš„ <code>dependencies</code> å€¼æ˜¯æœ€æ–°çš„ï¼Œè€Œä¸‹ä¸€æ®µä»£ç ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useCallback</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> fn </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">fn</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">ref</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åˆä»…æ‰§è¡Œä¸€æ¬¡ï¼ˆref å¼•ç”¨ä¸ä¼šæ”¹å˜ï¼‰ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½å¯ä»¥è¿”å› <code>dependencies</code> æ˜¯æœ€æ–°çš„ <code>fn</code>ï¼Œå¹¶ä¸” <code>fn</code> è¿˜ä¸ä¼šé‡æ–°æ‰§è¡Œã€‚</p><p>å‡è®¾æˆ‘ä»¬å¯¹ <code>useEventCallback</code> ä¼ å…¥çš„å›è°ƒå‡½æ•°ç§°ä¸º Xï¼Œ<strong>åˆ™è¿™æ®µä»£ç çš„å«ä¹‰ï¼Œå°±æ˜¯ä½¿æ¯æ¬¡æ¸²æŸ“çš„é—­åŒ…ä¸­ï¼Œå›è°ƒå‡½æ•° X æ€»æ˜¯æ‹¿åˆ°çš„æ€»æ˜¯æœ€æ–° Rerender é—­åŒ…ä¸­çš„é‚£ä¸ªï¼Œæ‰€ä»¥ä¾èµ–çš„å€¼æ°¸è¿œæ˜¯æœ€æ–°çš„ï¼Œè€Œä¸”å‡½æ•°ä¸ä¼šé‡æ–°åˆå§‹åŒ–ã€‚</strong></p><blockquote><p><strong>React <a href="https://reactjs.org/docs/hooks-faq.html#how-to-read-an-often-changing-value-from-usecallback" target="_blank" rel="noopener noreferrer">å®˜æ–¹ä¸æ¨èä½¿ç”¨æ­¤èŒƒå¼</a>ï¼Œå› æ­¤å¯¹äºè¿™ç§åœºæ™¯ï¼Œåˆ©ç”¨ <code>useReducer</code>ï¼Œå°†å‡½æ•°é€šè¿‡ <code>dispatch</code> ä¸­è°ƒç”¨ã€‚</strong> è¿˜è®°å¾—å—ï¼Ÿ<code>dispatch</code> æ˜¯ä¸€ç§å¯ä»¥ç»•è¿‡ä¾èµ–çš„é»‘é­”æ³•ï¼Œæˆ‘ä»¬åœ¨ â€œä»€ä¹ˆæ˜¯ useReducerâ€ å°èŠ‚æåˆ°è¿‡ã€‚</p></blockquote><p>éšç€å¯¹ Function Component çš„ä½¿ç”¨ï¼Œä½ ä¹Ÿæ¸æ¸å…³å¿ƒåˆ°å‡½æ•°çš„æ€§èƒ½äº†ï¼Œè¿™å¾ˆæ£’ã€‚é‚£ä¹ˆä¸‹ä¸€ä¸ªé‡ç‚¹è‡ªç„¶æ˜¯å…³æ³¨ Render çš„æ€§èƒ½ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ç”¨-memo-åš-purerender"></a>ç”¨ memo åš PureRender<a class="hash-link" href="#ç”¨-memo-åš-purerender" title="Direct link to heading">#</a></h3><p>åœ¨ Fucntion Component ä¸­ï¼ŒClass Component çš„ <code>PureComponent</code> ç­‰ä»·çš„æ¦‚å¿µæ˜¯ <code>React.memo</code>ï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ <code>memo</code> çš„ç”¨æ³•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">memo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä½¿ç”¨ <code>memo</code> åŒ…è£¹çš„ç»„ä»¶ï¼Œä¼šåœ¨è‡ªèº«é‡æ¸²æŸ“æ—¶ï¼Œå¯¹æ¯ä¸€ä¸ª <code>props</code> é¡¹è¿›è¡Œæµ…å¯¹æ¯”ï¼Œå¦‚æœå¼•ç”¨æ²¡æœ‰å˜åŒ–ï¼Œå°±ä¸ä¼šè§¦å‘é‡æ¸²æŸ“ã€‚æ‰€ä»¥ <code>memo</code> æ˜¯ä¸€ç§å¾ˆæ£’çš„æ€§èƒ½ä¼˜åŒ–å·¥å…·ã€‚</p><p>ä¸‹é¢å°±ä»‹ç»ä¸€ä¸ªçœ‹ä¼¼æ¯” <code>memo</code> éš¾ç”¨ï¼Œä½†çœŸæ­£ç†è§£åä¼šå‘ç°ï¼Œå…¶å®æ¯” <code>memo</code> æ›´å¥½ç”¨çš„æ¸²æŸ“ä¼˜åŒ–å‡½æ•°ï¼š<code>useMemo</code>ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ç”¨-usememo-åšå±€éƒ¨-purerender"></a>ç”¨ useMemo åšå±€éƒ¨ PureRender<a class="hash-link" href="#ç”¨-usememo-åšå±€éƒ¨-purerender" title="Direct link to heading">#</a></h3><p>ç›¸æ¯” <code>React.memo</code> è¿™ä¸ªå¼‚ç±»ï¼Œ<code>React.useMemo</code> å¯æ˜¯æ­£ç»çš„å®˜æ–¹ Hookï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:rgb(111, 66, 193)">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useMemo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åˆ©ç”¨ <code>useMemo</code> åŒ…è£¹æ¸²æŸ“ä»£ç ï¼Œè¿™æ ·å³ä¾¿å‡½æ•° <code>Child</code> å› ä¸º <code>props</code> çš„å˜åŒ–é‡æ–°æ‰§è¡Œäº†ï¼Œåªè¦æ¸²æŸ“å‡½æ•°ç”¨åˆ°çš„ <code>props.fetchData</code> æ²¡æœ‰å˜ï¼Œå°±ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚</p><p>è¿™é‡Œå‘ç°äº† <code>useMemo</code> çš„ç¬¬ä¸€ä¸ªå¥½å¤„ï¼š<strong>æ›´ç»†ç²’åº¦çš„ä¼˜åŒ–æ¸²æŸ“</strong>ã€‚</p><p>æ‰€è°“æ›´ç»†ç²’åº¦çš„ä¼˜åŒ–æ¸²æŸ“ï¼Œæ˜¯æŒ‡å‡½æ•° <code>Child</code> æ•´ä½“å¯èƒ½ç”¨åˆ°äº† <code>A</code>ã€<code>B</code> ä¸¤ä¸ª <code>props</code>ï¼Œè€Œæ¸²æŸ“ä»…ç”¨åˆ°äº† <code>B</code>ï¼Œé‚£ä¹ˆä½¿ç”¨ <code>memo</code> æ–¹æ¡ˆæ—¶ï¼Œ<code>A</code> çš„å˜åŒ–ä¼šå¯¼è‡´é‡æ¸²æŸ“ï¼Œè€Œä½¿ç”¨ <code>useMemo</code> çš„æ–¹æ¡ˆåˆ™ä¸ä¼šã€‚</p><p>è€Œ <code>useMemo</code> çš„å¥½å¤„è¿˜ä¸æ­¢è¿™äº›ï¼Œè¿™é‡Œå…ˆç•™ä¸‹ä¼ç¬”ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªæ–°é—®é¢˜ï¼šå½“å‚æ•°è¶Šæ¥è¶Šå¤šæ—¶ï¼Œä½¿ç”¨ <code>props</code> å°†å‡½æ•°ã€å€¼åœ¨ç»„ä»¶é—´ä¼ é€’éå¸¸å†—é•¿ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Parent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> fetchData </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useFetch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Child</span><span class="token plain"> fetchData</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> setCount</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> setStep</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è™½ç„¶ <code>Child</code> å¯ä»¥é€šè¿‡ <code>memo</code> æˆ– <code>useMemo</code> è¿›è¡Œä¼˜åŒ–ï¼Œ<strong>ä½†å½“ç¨‹åºå¤æ‚æ—¶ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªå‡½æ•°åœ¨æ‰€æœ‰ Function Component é—´å…±äº«çš„æƒ…å†µ</strong>ï¼Œæ­¤æ—¶å°±éœ€è¦æ–° Hook: <code>useContext</code> æ¥æ‹¯æ•‘äº†ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä½¿ç”¨-context-åšæ‰¹é‡é€ä¼ "></a>ä½¿ç”¨ Context åšæ‰¹é‡é€ä¼ <a class="hash-link" href="#ä½¿ç”¨-context-åšæ‰¹é‡é€ä¼ " title="Direct link to heading">#</a></h3><p>åœ¨ Function Component ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>React.createContext</code> åˆ›å»ºä¸€ä¸ª Context:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Store</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">createContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token keyword null nil" style="color:#e3116c">null</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å…¶ä¸­ <code>null</code> æ˜¯åˆå§‹å€¼ï¼Œä¸€èˆ¬ç½®ä¸º <code>null</code> ä¹Ÿæ²¡å…³ç³»ã€‚æ¥ä¸‹æ¥è¿˜æœ‰ä¸¤æ­¥ï¼Œåˆ†åˆ«æ˜¯åœ¨æ ¹èŠ‚ç‚¹ä½¿ç”¨ <code>Store.Provider</code> æ³¨å…¥ï¼Œä¸åœ¨å­èŠ‚ç‚¹ä½¿ç”¨å®˜æ–¹ Hook <code>useContext</code> æ‹¿åˆ°æ³¨å…¥çš„æ•°æ®ï¼š</p><p>åœ¨æ ¹èŠ‚ç‚¹ä½¿ç”¨ <code>Store.Provider</code> æ³¨å…¥ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Parent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> fetchData </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useFetch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access maybe-class-name" style="color:rgb(111, 66, 193)">Provider</span><span class="token plain"> value</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setStep</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> fetchData </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access maybe-class-name" style="color:rgb(111, 66, 193)">Provider</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åœ¨å­èŠ‚ç‚¹ä½¿ç”¨ <code>useContext</code> æ‹¿åˆ°æ³¨å…¥çš„æ•°æ®ï¼ˆä¹Ÿå°±æ˜¯æ‹¿åˆ° <code>Store.Provider</code> çš„ <code>value</code>ï¼‰ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">memo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> setCount </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">onClick</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">setCount</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">count</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™æ ·å°±ä¸éœ€è¦åœ¨æ¯ä¸ªå‡½æ•°é—´è¿›è¡Œå‚æ•°é€ä¼ äº†ï¼Œå…¬å…±å‡½æ•°å¯ä»¥éƒ½æ”¾åœ¨ Context é‡Œã€‚</p><p>ä½†æ˜¯å½“å‡½æ•°å¤šäº†ï¼Œ<code>Provider</code> çš„ <code>value</code> ä¼šå˜å¾—å¾ˆè‡ƒè‚¿ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆä¹‹å‰è®²åˆ°çš„ <code>useReducer</code> è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä½¿ç”¨-usereducer-ä¸º-context-ä¼ é€’å†…å®¹ç˜¦èº«"></a>ä½¿ç”¨ <code>useReducer</code> ä¸º Context ä¼ é€’å†…å®¹ç˜¦èº«<a class="hash-link" href="#ä½¿ç”¨-usereducer-ä¸º-context-ä¼ é€’å†…å®¹ç˜¦èº«" title="Direct link to heading">#</a></h3><p>ä½¿ç”¨ <code>useReducer</code>ï¼Œæ‰€æœ‰å›è°ƒå‡½æ•°éƒ½é€šè¿‡è°ƒç”¨ <code>dispatch</code> å®Œæˆï¼Œé‚£ä¹ˆ Context åªè¦ä¼ é€’ <code>dispatch</code> ä¸€ä¸ªå‡½æ•°å°±å¥½äº†ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Store</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">createContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token keyword null nil" style="color:#e3116c">null</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Parent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useReducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">reducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access maybe-class-name" style="color:rgb(111, 66, 193)">Provider</span><span class="token plain"> value</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access maybe-class-name" style="color:rgb(111, 66, 193)">Provider</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¸‹æ— è®ºæ˜¯æ ¹èŠ‚ç‚¹çš„ <code>Provider</code>ï¼Œè¿˜æ˜¯å­å…ƒç´ è°ƒç”¨éƒ½æ¸…çˆ½å¾ˆå¤šï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useMemo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">onClick</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&#x27;countInc&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token comment" style="color:rgb(106, 153, 85)">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä½ ä¹Ÿè®¸å¾ˆå¿«å°±æƒ³åˆ°ï¼Œå°† <code>state</code> ä¹Ÿé€šè¿‡ <code>Provider</code> æ³¨å…¥è¿›å»å²‚ä¸æ›´å¦™ï¼Ÿæ˜¯çš„ï¼Œä½†æ­¤å¤„è¯·åŠ¡å¿…æ³¨æ„æ½œåœ¨æ€§èƒ½é—®é¢˜ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="å°†-state-ä¹Ÿæ”¾åˆ°-context-ä¸­"></a>å°† <code>state</code> ä¹Ÿæ”¾åˆ° Context ä¸­<a class="hash-link" href="#å°†-state-ä¹Ÿæ”¾åˆ°-context-ä¸­" title="Direct link to heading">#</a></h3><p>ç¨ç¨æ”¹é€ ä¸‹ï¼Œå°† <code>state</code> ä¹Ÿæ”¾åˆ° Context ä¸­ï¼Œè¿™ä¸‹èµ‹å€¼ä¸å–å€¼éƒ½éå¸¸æ–¹ä¾¿äº†ï¼</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Store</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">createContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token keyword null nil" style="color:#e3116c">null</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Parent</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useReducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">reducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> step</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access maybe-class-name" style="color:rgb(111, 66, 193)">Provider</span><span class="token plain"> value</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Step</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access maybe-class-name" style="color:rgb(111, 66, 193)">Provider</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯¹ <code>Count</code> <code>Step</code> è¿™ä¸¤ä¸ªå­å…ƒç´ è€Œè¨€ï¼Œå¯éœ€è¦è°¨æ…ä¸€äº›ï¼Œå‡å¦‚æˆ‘ä»¬è¿™ä¹ˆå®ç°è¿™ä¸¤ä¸ªå­å…ƒç´ ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">memo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;incCount&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain">incCount </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Step</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">memo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;incStep&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain">incStep </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å…¶ç»“æœæ˜¯ï¼š<strong>æ— è®ºç‚¹å‡» <code>incCount</code> è¿˜æ˜¯ <code>incStep</code>ï¼Œéƒ½ä¼šåŒæ—¶è§¦å‘è¿™ä¸¤ä¸ªç»„ä»¶çš„ Rerenderã€‚</strong></p><p>å…¶é—®é¢˜åœ¨äºï¼š<code>memo</code> åªèƒ½æŒ¡åœ¨æœ€å¤–å±‚çš„ï¼Œè€Œé€šè¿‡ <code>useContext</code> çš„æ•°æ®æ³¨å…¥å‘ç”Ÿåœ¨å‡½æ•°å†…éƒ¨ï¼Œä¼š <strong>ç»•è¿‡ <code>memo</code>ã€‚</strong></p><p>å½“è§¦å‘ <code>dispatch</code> å¯¼è‡´ <code>state</code> å˜åŒ–æ—¶ï¼Œæ‰€æœ‰ä½¿ç”¨äº† <code>state</code> çš„ç»„ä»¶å†…éƒ¨éƒ½ä¼šå¼ºåˆ¶é‡æ–°åˆ·æ–°ï¼Œæ­¤æ—¶æƒ³è¦å¯¹æ¸²æŸ“æ¬¡æ•°åšä¼˜åŒ–ï¼Œåªæœ‰æ‹¿å‡º <code>useMemo</code> äº†ï¼</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="usememo-é…åˆ-usecontext"></a><code>useMemo</code> é…åˆ <code>useContext</code><a class="hash-link" href="#usememo-é…åˆ-usecontext" title="Direct link to heading">#</a></h3><p>ä½¿ç”¨ <code>useContext</code> çš„ç»„ä»¶ï¼Œå¦‚æœè‡ªèº«ä¸ä½¿ç”¨ <code>props</code>ï¼Œå°±å¯ä»¥å®Œå…¨ä½¿ç”¨ <code>useMemo</code> ä»£æ›¿ <code>memo</code> åšæ€§èƒ½ä¼˜åŒ–ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:rgb(111, 66, 193)">Count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useMemo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;incCount&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        incCount </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:rgb(111, 66, 193)">Step</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useMemo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;incStep&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain">incStep </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">step</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯¹è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œç‚¹å‡»å¯¹åº”çš„æŒ‰é’®ï¼Œ<strong>åªæœ‰ä½¿ç”¨åˆ°çš„ç»„ä»¶æ‰ä¼šé‡æ¸²æŸ“ï¼Œæ•ˆæœç¬¦åˆé¢„æœŸã€‚</strong> ç»“åˆ <a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="noopener noreferrer">eslint-plugin-react-hooks</a> æ’ä»¶ä½¿ç”¨ï¼Œè¿ <code>useMemo</code> çš„ç¬¬äºŒä¸ªå‚æ•°ä¾èµ–éƒ½æ˜¯è‡ªåŠ¨è¡¥å…¨çš„ã€‚</p><p>è¯»åˆ°è¿™é‡Œï¼Œä¸çŸ¥é“ä½ æ˜¯å¦è”æƒ³åˆ°äº† <a href="https://github.com/reduxjs/redux" target="_blank" rel="noopener noreferrer">Redux</a> çš„ <code>Connect</code>?</p><p>æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ <code>Connect</code> ä¸ <code>useMemo</code>ï¼Œä¼šå‘ç°æƒŠäººçš„ç›¸ä¼¼ä¹‹å¤„ã€‚</p><p>ä¸€ä¸ªæ™®é€šçš„ Redux ç»„ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">mapStateToProps</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">mapDispatchToProps</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token parameter">dispatch</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">@</span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">Connect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">mapStateToProps</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> mapDispatchToProps</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Count</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">React</span><span class="token class-name punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token class-name" style="color:rgb(227, 98, 9)">PureComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">render</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;incCount&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        incCount </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token keyword" style="color:#e3116c">this</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸€ä¸ªæ™®é€šçš„ Function Component ç»„ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:rgb(111, 66, 193)">Count</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useMemo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;incCount&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        incCount </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">button</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ä¸¤æ®µä»£ç çš„æ•ˆæœå®Œå…¨ä¸€æ ·ï¼ŒFunction Component é™¤äº†æ›´ç®€æ´ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´å¤§çš„ä¼˜åŠ¿ï¼š<strong>å…¨è‡ªåŠ¨çš„ä¾èµ–æ¨å¯¼</strong>ã€‚</p><p>Hooks è¯ç”Ÿçš„ä¸€ä¸ªåŸå› ï¼Œå°±æ˜¯ä¸ºäº†ä¾¿äºé™æ€åˆ†æä¾èµ–ï¼Œç®€åŒ– Immutable æ•°æ®æµçš„ä½¿ç”¨æˆæœ¬ã€‚</p><p>æˆ‘ä»¬çœ‹ <code>Connect</code> çš„åœºæ™¯ï¼š</p><p>ç”±äºä¸çŸ¥é“å­ç»„ä»¶ä½¿ç”¨äº†å“ªäº›æ•°æ®ï¼Œå› æ­¤éœ€è¦åœ¨ <code>mapStateToProps</code> æå‰å†™å¥½ï¼Œè€Œå½“éœ€è¦ä½¿ç”¨æ•°æ®æµå†…æ–°å˜é‡æ—¶ï¼Œç»„ä»¶é‡Œæ˜¯æ— æ³•è®¿é—®çš„ï¼Œæˆ‘ä»¬è¦å›åˆ° <code>mapStateToProps</code> åŠ ä¸Šè¿™ä¸ªä¾èµ–ï¼Œå†å›åˆ°ç»„ä»¶ä¸­ä½¿ç”¨å®ƒã€‚</p><p>è€Œ <code>useContext</code> + <code>useMemo</code> çš„åœºæ™¯ï¼š</p><p>ç”±äºæ³¨å…¥çš„ <code>state</code> æ˜¯å…¨é‡çš„ï¼ŒRender å‡½æ•°ä¸­æƒ³ç”¨ä»€ä¹ˆéƒ½å¯ç›´æ¥ç”¨ï¼Œåœ¨æŒ‰ä¿å­˜é”®æ—¶ï¼Œ<a href="https://www.npmjs.com/package/eslint-plugin-react-hooks" target="_blank" rel="noopener noreferrer">eslint-plugin-react-hooks</a> ä¼šé€šè¿‡é™æ€åˆ†æï¼Œåœ¨ <code>useMemo</code> ç¬¬äºŒä¸ªå‚æ•°è‡ªåŠ¨è¡¥ä¸Šä»£ç é‡Œä½¿ç”¨åˆ°çš„å¤–éƒ¨å˜é‡ï¼Œæ¯”å¦‚ <code>state.count</code>ã€<code>dispatch</code>ã€‚</p><p>å¦å¤–å¯ä»¥å‘ç°ï¼ŒContext å¾ˆåƒ Reduxï¼Œé‚£ä¹ˆ Class Component æ¨¡å¼ä¸‹çš„å¼‚æ­¥ä¸­é—´ä»¶å®ç°çš„å¼‚æ­¥å–æ•°æ€ä¹ˆåˆ©ç”¨ <code>useReducer</code> åšå‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šåšä¸åˆ°ã€‚</p><p>å½“ç„¶ä¸æ˜¯è¯´ Function Component æ— æ³•å®ç°å¼‚æ­¥å–æ•°ï¼Œè€Œæ˜¯ç”¨çš„å·¥å…·é”™äº†ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä½¿ç”¨è‡ªå®šä¹‰-hook-å¤„ç†å‰¯ä½œç”¨"></a>ä½¿ç”¨è‡ªå®šä¹‰ Hook å¤„ç†å‰¯ä½œç”¨<a class="hash-link" href="#ä½¿ç”¨è‡ªå®šä¹‰-hook-å¤„ç†å‰¯ä½œç”¨" title="Direct link to heading">#</a></h3><p>æ¯”å¦‚ä¸Šé¢æŠ›å‡ºçš„å¼‚æ­¥å–æ•°åœºæ™¯ï¼Œåœ¨ Function Component çš„æœ€ä½³åšæ³•æ˜¯å°è£…æˆä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">useDataApi</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">initialUrl</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token parameter"> initialData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> setUrl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">initialUrl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useReducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">dataFetchReducer</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    isLoading</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">false</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    isError</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">false</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    data</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> initialData</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">let</span><span class="token plain"> didCancel </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">false</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">fetchData</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&quot;FETCH_INIT&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#e3116c">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> result </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#e3116c">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">axios</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#e3116c">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token operator" style="color:rgb(0, 92, 197)">!</span><span class="token plain">didCancel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&quot;FETCH_SUCCESS&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> payload</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">data</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#e3116c">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#e3116c">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token operator" style="color:rgb(0, 92, 197)">!</span><span class="token plain">didCancel</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">          </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&quot;FETCH_FAILURE&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">fetchData</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      didCancel </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">true</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">doFetch</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token parameter">url</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">setUrl</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> </span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token plain">state</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> doFetch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œè‡ªå®šä¹‰ Hook æ‹¥æœ‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬å¯ä»¥å°†å–æ•°è¿‡ç¨‹å°è£…èµ·æ¥ï¼Œåªæš´éœ²çŠ¶æ€ - æ˜¯å¦åœ¨åŠ è½½ä¸­ï¼š<code>isLoading</code> æ˜¯å¦å–æ•°å¤±è´¥ï¼š<code>isError</code> æ•°æ®ï¼š<code>data</code>ã€‚</p><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">App</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> isError </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useDataApi</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;https://v&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    showLog</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">true</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦‚æœè¿™ä¸ªå€¼éœ€è¦å­˜å‚¨åˆ°æ•°æ®æµï¼Œåœ¨æ‰€æœ‰ç»„ä»¶ä¹‹é—´å…±äº«ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆ <code>useEffect</code> ä¸ <code>useReducer</code>ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">App</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> dispatch </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useContext</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token maybe-class-name">Store</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> isError </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useDataApi</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;https://v&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    showLog</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">true</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&quot;updateLoading&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      data</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      isLoading</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      isError</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> isLoading</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> isError</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åˆ°æ­¤ï¼ŒFunction Component çš„å…¥é—¨æ¦‚å¿µå°±è®²å®Œäº†ï¼Œæœ€åé™„å¸¦ä¸€ä¸ªå½©è›‹ï¼šFunction Component çš„ DefaultProps æ€ä¹ˆå¤„ç†ï¼Ÿ</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="function-component-çš„-defaultprops-æ€ä¹ˆå¤„ç†ï¼Ÿ"></a>Function Component çš„ DefaultProps æ€ä¹ˆå¤„ç†ï¼Ÿ<a class="hash-link" href="#function-component-çš„-defaultprops-æ€ä¹ˆå¤„ç†ï¼Ÿ" title="Direct link to heading">#</a></h3><p>è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™ä¸ç„¶ã€‚æˆ‘ä»¬è‡³å°‘æœ‰ä¸¤ç§æ–¹å¼å¯¹ Function Component çš„ DefaultProps è¿›è¡Œèµ‹å€¼ï¼Œä¸‹é¢ä¸€ä¸€è¯´æ˜ã€‚</p><p>é¦–å…ˆå¯¹äº Class Componentï¼ŒDefaultProps åŸºæœ¬ä¸Šåªæœ‰ä¸€ç§å¤§å®¶éƒ½è®¤å¯çš„å†™æ³•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Button</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">React</span><span class="token class-name punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token class-name" style="color:rgb(227, 98, 9)">PureComponent</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  defaultProps </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token string">&quot;primary&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">onChange</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ç„¶è€Œåœ¨ Function Component å°±äº”èŠ±å…«é—¨äº†ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="åˆ©ç”¨-es6-ç‰¹æ€§åœ¨å‚æ•°å®šä¹‰é˜¶æ®µèµ‹å€¼"></a>åˆ©ç”¨ ES6 ç‰¹æ€§åœ¨å‚æ•°å®šä¹‰é˜¶æ®µèµ‹å€¼<a class="hash-link" href="#åˆ©ç”¨-es6-ç‰¹æ€§åœ¨å‚æ•°å®šä¹‰é˜¶æ®µèµ‹å€¼" title="Direct link to heading">#</a></h4><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">Button</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> type </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token string">&quot;primary&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">onChange</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™ç§æ–¹æ³•çœ‹ä¼¼å¾ˆä¼˜é›…ï¼Œå…¶å®æœ‰ä¸€ä¸ªé‡å¤§éšæ‚£ï¼š<strong>æ²¡æœ‰å‘½ä¸­çš„ <code>props</code> åœ¨æ¯æ¬¡æ¸²æŸ“å¼•ç”¨éƒ½ä¸åŒã€‚</strong></p><p>çœ‹è¿™ç§åœºæ™¯ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> Child </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">memo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token parameter"> type </span><span class="token parameter operator" style="color:rgb(0, 92, 197)">=</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token parameter"> a</span><span class="token parameter operator" style="color:rgb(0, 92, 197)">:</span><span class="token parameter"> </span><span class="token parameter number">1</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token function" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">Child</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åªè¦ <code>type</code> çš„å¼•ç”¨ä¸å˜ï¼Œ<code>useEffect</code> å°±ä¸ä¼šé¢‘ç¹çš„æ‰§è¡Œã€‚ç°åœ¨é€šè¿‡çˆ¶å…ƒç´ åˆ·æ–°å¯¼è‡´ <code>Child</code> è·Ÿç€åˆ·æ–°ï¼Œæˆ‘ä»¬å‘ç°ï¼Œ<strong>æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰“å°å‡ºæ—¥å¿—ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œ<code>type</code> çš„å¼•ç”¨æ˜¯ä¸åŒçš„ã€‚</strong></p><p>æœ‰ä¸€ç§ä¸å¤ªä¼˜é›…çš„æ–¹å¼å¯ä»¥è§£å†³ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> defaultType </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> a</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token parameter"> type </span><span class="token parameter operator" style="color:rgb(0, 92, 197)">=</span><span class="token parameter"> defaultType </span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token function" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">Child</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>æ­¤æ—¶ä¸æ–­åˆ·æ–°çˆ¶å…ƒç´ ï¼Œåªä¼šæ‰“å°å‡ºä¸€æ¬¡æ—¥å¿—ï¼Œå› ä¸º <code>type</code> çš„å¼•ç”¨æ˜¯ç›¸åŒçš„ã€‚</p><p><strong>æˆ‘ä»¬ä½¿ç”¨ DefaultProps çš„æœ¬æ„å¿…ç„¶æ˜¯å¸Œæœ›é»˜è®¤å€¼çš„å¼•ç”¨ç›¸åŒï¼Œ</strong> å¦‚æœä¸æƒ³å•ç‹¬ç»´æŠ¤å˜é‡çš„å¼•ç”¨ï¼Œè¿˜å¯ä»¥å€Ÿç”¨ React å†…ç½®çš„ <code>defaultProps</code> æ–¹æ³•è§£å†³ã€‚</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="åˆ©ç”¨-react-å†…ç½®æ–¹æ¡ˆ"></a>åˆ©ç”¨ React å†…ç½®æ–¹æ¡ˆ<a class="hash-link" href="#åˆ©ç”¨-react-å†…ç½®æ–¹æ¡ˆ" title="Direct link to heading">#</a></h4><p>React å†…ç½®æ–¹æ¡ˆèƒ½è¾ƒå¥½çš„è§£å†³å¼•ç”¨é¢‘ç¹å˜åŠ¨çš„é—®é¢˜ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly jsx"><div tabindex="0" class="prism-code language-jsx codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:rgb(111, 66, 193)">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token parameter"> type </span><span class="token parameter punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token function" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;type&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token plain">Child</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&lt;/</span><span class="token tag" style="color:rgb(78, 201, 176)">div</span><span class="token tag punctuation" style="color:rgb(36, 41, 46)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">Child</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token plain">defaultProps </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  type</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> a</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œä¸æ–­åˆ·æ–°çˆ¶å…ƒç´ ï¼Œåªä¼šæ‰“å°å‡ºä¸€æ¬¡æ—¥å¿—ã€‚</p><p><strong>å› æ­¤å»ºè®®å¯¹äº Function Component çš„å‚æ•°é»˜è®¤å€¼ï¼Œå»ºè®®ä½¿ç”¨ React å†…ç½®æ–¹æ¡ˆè§£å†³ï¼Œå› ä¸ºçº¯å‡½æ•°çš„æ–¹æ¡ˆä¸åˆ©äºä¿æŒå¼•ç”¨ä¸å˜ã€‚</strong></p><p>æœ€åè¡¥å……ä¸€ä¸ªçˆ¶ç»„ä»¶ â€œå‘â€ å­ç»„ä»¶çš„ç»å…¸æ¡ˆä¾‹ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="ä¸è¦å‘äº†å­ç»„ä»¶"></a>ä¸è¦å‘äº†å­ç»„ä»¶<a class="hash-link" href="#ä¸è¦å‘äº†å­ç»„ä»¶" title="Direct link to heading">#</a></h3><p>æˆ‘ä»¬åšä¸€ä¸ªç‚¹å‡»ç´¯åŠ çš„æŒ‰é’®ä½œä¸ºçˆ¶ç»„ä»¶ï¼Œé‚£ä¹ˆçˆ¶ç»„ä»¶æ¯æ¬¡ç‚¹å‡»åéƒ½ä¼šåˆ·æ–°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">App</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> forceUpdate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> schema </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> b</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Child</span><span class="token plain"> schema</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">schema</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">forceUpdate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">Count</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>å¦å¤–æˆ‘ä»¬å°† <code>schema = { b: 1 }</code> ä¼ é€’ç»™å­ç»„ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯åŸ‹çš„ä¸€ä¸ªå¤§å‘ã€‚</p><p>å­ç»„ä»¶çš„ä»£ç å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">memo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;schema&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">schema</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">schema</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">Child</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>åªè¦çˆ¶çº§ <code>props.schema</code> å˜åŒ–å°±ä¼šæ‰“å°æ—¥å¿—ã€‚ç»“æœè‡ªç„¶æ˜¯ï¼Œçˆ¶ç»„ä»¶æ¯æ¬¡åˆ·æ–°ï¼Œå­ç»„ä»¶éƒ½ä¼šæ‰“å°æ—¥å¿—ï¼Œä¹Ÿå°±æ˜¯ <strong>å­ç»„ä»¶ <code>[props.schema]</code> å®Œå…¨å¤±æ•ˆäº†ï¼Œå› ä¸ºå¼•ç”¨ä¸€ç›´åœ¨å˜åŒ–ã€‚</strong></p><p>å…¶å® <strong>å­ç»„ä»¶å…³å¿ƒçš„æ˜¯å€¼ï¼Œè€Œä¸æ˜¯å¼•ç”¨ï¼Œæ‰€ä»¥ä¸€ç§è§£æ³•æ˜¯æ”¹å†™å­ç»„ä»¶çš„ä¾èµ–ï¼š</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token maybe-class-name">Child</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">memo</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token parameter">props</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">useEffect</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token console class-name" style="color:rgb(227, 98, 9)">console</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">log</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&quot;schema&quot;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">schema</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token known-class-name class-name" style="color:rgb(227, 98, 9)">JSON</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token method function property-access" style="color:rgb(111, 66, 193)">stringify</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">props</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">schema</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">Child</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™æ ·å¯ä»¥ä¿è¯å­ç»„ä»¶åªæ¸²æŸ“ä¸€æ¬¡ã€‚</p><p>å¯æ˜¯çœŸæ­£ç½ªé­ç¥¸é¦–æ˜¯çˆ¶ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨ Ref ä¼˜åŒ–ä¸€ä¸‹çˆ¶ç»„ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><div tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:rgb(111, 66, 193)">App</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">[</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> forceUpdate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useState</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword" style="color:#e3116c">const</span><span class="token plain"> schema </span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">useRef</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"> b</span><span class="token operator" style="color:rgb(0, 92, 197)">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#e3116c">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token maybe-class-name">Child</span><span class="token plain"> schema</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">schema</span><span class="token punctuation" style="color:rgb(36, 41, 46)">.</span><span class="token property-access" style="color:rgb(111, 66, 193)">current</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">      </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token plain">div onClick</span><span class="token operator" style="color:rgb(0, 92, 197)">=</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(0, 92, 197)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(111, 66, 193)">forceUpdate</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token plain">count </span><span class="token operator" style="color:rgb(0, 92, 197)">+</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token maybe-class-name">Count</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain">count</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token operator" style="color:rgb(0, 92, 197)">&lt;</span><span class="token operator" style="color:rgb(0, 92, 197)">/</span><span class="token plain">div</span><span class="token operator" style="color:rgb(0, 92, 197)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>è¿™æ · <code>schema</code> çš„å¼•ç”¨èƒ½ä¸€ç›´ä¿æŒä¸å˜ã€‚å¦‚æœä½ å®Œæ•´è¯»å®Œäº†æœ¬æ–‡ï¼Œåº”è¯¥å¯ä»¥å……åˆ†ç†è§£ç¬¬ä¸€ä¸ªä¾‹å­çš„ <code>schema</code> åœ¨æ¯ä¸ªæ¸²æŸ“å¿«ç…§ä¸­éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å¼•ç”¨ï¼Œè€Œ Ref çš„ä¾‹å­ä¸­ï¼Œ<code>schema</code> åœ¨æ¯ä¸ªæ¸²æŸ“å¿«ç…§ä¸­éƒ½åªæœ‰ä¸€ä¸ªå”¯ä¸€çš„å¼•ç”¨ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="3-æ€»ç»“"></a>3. æ€»ç»“<a class="hash-link" href="#3-æ€»ç»“" title="Direct link to heading">#</a></h2><p>æ‰€ä»¥ä½¿ç”¨ Function Component ä½ å…¥é—¨äº†å—ï¼Ÿ</p><p>æœ¬æ¬¡ç²¾è¯»ç•™ä¸‹çš„æ€è€ƒé¢˜æ˜¯ï¼šFunction Component å¼€å‘è¿‡ç¨‹ä¸­è¿˜æœ‰å“ªäº›å®¹æ˜“çŠ¯é”™è¯¯çš„ç»†èŠ‚ï¼Ÿ</p><blockquote><p>è®¨è®ºåœ°å€æ˜¯ï¼š<a href="https://github.com/dt-fe/weekly/issues/157" target="_blank" rel="noopener noreferrer">ç²¾è¯»ã€ŠFunction Component å…¥é—¨ã€‹ Â· Issue #157 Â· dt-fe/weekly</a></p></blockquote><p><strong>å¦‚æœä½ æƒ³å‚ä¸è®¨è®ºï¼Œè¯· <a href="https://github.com/dt-fe/weekly" target="_blank" rel="noopener noreferrer">ç‚¹å‡»è¿™é‡Œ</a>ï¼Œæ¯å‘¨éƒ½æœ‰æ–°çš„ä¸»é¢˜ï¼Œå‘¨æœ«æˆ–å‘¨ä¸€å‘å¸ƒã€‚å‰ç«¯ç²¾è¯» - å¸®ä½ ç­›é€‰é è°±çš„å†…å®¹ã€‚</strong></p><p><strong>special Sponsors</strong></p><ul><li><a href="https://e.coding.net/?utm_source=weekly" target="_blank" rel="noopener noreferrer">DevOps å…¨æµç¨‹å¹³å°</a></li></ul><blockquote><p>ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²åï¼ˆ<a href="https://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank" rel="noopener noreferrer">åˆ›æ„å…±äº« 3.0 è®¸å¯è¯</a>ï¼‰</p></blockquote></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/coder-study-room/Front-end-Advanced-Route/edit/master/weekly/104.ç²¾è¯»ã€ŠFunction Component å…¥é—¨ã€‹.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2021-04-08T10:56:46.000Z" class="lastUpdatedDate_1WI_">4/8/2021</time> by <strong>wangweidong</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/weekly/103"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 103. ç²¾è¯»ã€Šä¸ºä»€ä¹ˆä¸“å®¶ä¸å†å…³å¿ƒæŠ€æœ¯ç»†èŠ‚ã€‹</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/weekly/105"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">105. ç²¾è¯»ã€ŠWhat&#x27;s new in javascriptã€‹ Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-å¼•è¨€" class="table-of-contents__link">1. å¼•è¨€</a></li><li><a href="#2-ç²¾è¯»" class="table-of-contents__link">2. ç²¾è¯»</a><ul><li><a href="#ä»€ä¹ˆæ˜¯-function-componentï¼Ÿ" class="table-of-contents__link">ä»€ä¹ˆæ˜¯ Function Componentï¼Ÿ</a></li><li><a href="#ä»€ä¹ˆæ˜¯-hooksï¼Ÿ" class="table-of-contents__link">ä»€ä¹ˆæ˜¯ Hooksï¼Ÿ</a></li><li><a href="#å…ˆèµ‹å€¼å†-settimeout-æ‰“å°" class="table-of-contents__link">å…ˆèµ‹å€¼å† setTimeout æ‰“å°</a></li><li><a href="#ä½¿ç”¨-class-component-æ–¹å¼å®ç°ä¸€éå‘¢ï¼Ÿ" class="table-of-contents__link">ä½¿ç”¨ Class Component æ–¹å¼å®ç°ä¸€éå‘¢ï¼Ÿ</a></li><li><a href="#å¦‚ä½•è®©-function-component-ä¹Ÿæ‰“å°-3-3-3ï¼Ÿ" class="table-of-contents__link">å¦‚ä½•è®© Function Component ä¹Ÿæ‰“å° <code>3 3 3</code>ï¼Ÿ</a></li><li><a href="#å¦‚ä½•ä¸æ”¹é€ åŸå§‹å€¼ä¹Ÿæ‰“å°-3-3-3ï¼Ÿ" class="table-of-contents__link">å¦‚ä½•ä¸æ”¹é€ åŸå§‹å€¼ä¹Ÿæ‰“å° <code>3 3 3</code>ï¼Ÿ</a></li><li><a href="#ç”¨è‡ªå®šä¹‰-hook-åŒ…è£…-useref" class="table-of-contents__link">ç”¨è‡ªå®šä¹‰ Hook åŒ…è£… <code>useRef</code></a></li><li><a href="#å°†-settimeout-æ¢æˆ-setinterval-ä¼šæ€æ ·" class="table-of-contents__link">å°† <code>setTimeout</code> æ¢æˆ <code>setInterval</code> ä¼šæ€æ ·</a></li><li><a href="#æ°¸è¿œå¯¹ä¾èµ–é¡¹è¯šå®" class="table-of-contents__link">æ°¸è¿œå¯¹ä¾èµ–é¡¹è¯šå®</a></li><li><a href="#å¦‚ä½•ä¸åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°å®ä¾‹åŒ–-setinterval" class="table-of-contents__link">å¦‚ä½•ä¸åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶é‡æ–°å®ä¾‹åŒ– <code>setInterval</code>?</a></li><li><a href="#åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šå˜é‡æ—¶ï¼Ÿ" class="table-of-contents__link">åŒæ—¶ä½¿ç”¨ä¸¤ä¸ªä»¥ä¸Šå˜é‡æ—¶ï¼Ÿ</a></li><li><a href="#ä»€ä¹ˆæ˜¯-usereducer" class="table-of-contents__link">ä»€ä¹ˆæ˜¯ useReducer</a></li><li><a href="#å°†å‡½æ•°å†™åœ¨-useeffect-å†…éƒ¨" class="table-of-contents__link">å°†å‡½æ•°å†™åœ¨ <code>useEffect</code> å†…éƒ¨</a></li><li><a href="#å¦‚ä½•å°†å‡½æ•°æŠ½åˆ°-useeffect-å¤–éƒ¨ï¼Ÿ" class="table-of-contents__link">å¦‚ä½•å°†å‡½æ•°æŠ½åˆ° <code>useEffect</code> å¤–éƒ¨ï¼Ÿ</a></li><li><a href="#ä¸ºä»€ä¹ˆ-usecallback-æ¯”-componentdidupdate-æ›´å¥½ç”¨" class="table-of-contents__link">ä¸ºä»€ä¹ˆ <code>useCallback</code> æ¯” <code>componentDidUpdate</code> æ›´å¥½ç”¨</a></li><li><a href="#å°†å‡½æ•°æŠ½åˆ°ç»„ä»¶å¤–éƒ¨" class="table-of-contents__link">å°†å‡½æ•°æŠ½åˆ°ç»„ä»¶å¤–éƒ¨</a></li><li><a href="#åˆ©ç”¨-ref-ä¿è¯è€—æ—¶å‡½æ•°ä¾èµ–ä¸å˜" class="table-of-contents__link">åˆ©ç”¨ Ref ä¿è¯è€—æ—¶å‡½æ•°ä¾èµ–ä¸å˜</a></li><li><a href="#é€šç”¨çš„è‡ªå®šä¹‰-hooks-è§£å†³å‡½æ•°é‡æ–°å®ä¾‹åŒ–é—®é¢˜" class="table-of-contents__link">é€šç”¨çš„è‡ªå®šä¹‰ Hooks è§£å†³å‡½æ•°é‡æ–°å®ä¾‹åŒ–é—®é¢˜</a></li><li><a href="#ç”¨-memo-åš-purerender" class="table-of-contents__link">ç”¨ memo åš PureRender</a></li><li><a href="#ç”¨-usememo-åšå±€éƒ¨-purerender" class="table-of-contents__link">ç”¨ useMemo åšå±€éƒ¨ PureRender</a></li><li><a href="#ä½¿ç”¨-context-åšæ‰¹é‡é€ä¼ " class="table-of-contents__link">ä½¿ç”¨ Context åšæ‰¹é‡é€ä¼ </a></li><li><a href="#ä½¿ç”¨-usereducer-ä¸º-context-ä¼ é€’å†…å®¹ç˜¦èº«" class="table-of-contents__link">ä½¿ç”¨ <code>useReducer</code> ä¸º Context ä¼ é€’å†…å®¹ç˜¦èº«</a></li><li><a href="#å°†-state-ä¹Ÿæ”¾åˆ°-context-ä¸­" class="table-of-contents__link">å°† <code>state</code> ä¹Ÿæ”¾åˆ° Context ä¸­</a></li><li><a href="#usememo-é…åˆ-usecontext" class="table-of-contents__link"><code>useMemo</code> é…åˆ <code>useContext</code></a></li><li><a href="#ä½¿ç”¨è‡ªå®šä¹‰-hook-å¤„ç†å‰¯ä½œç”¨" class="table-of-contents__link">ä½¿ç”¨è‡ªå®šä¹‰ Hook å¤„ç†å‰¯ä½œç”¨</a></li><li><a href="#function-component-çš„-defaultprops-æ€ä¹ˆå¤„ç†ï¼Ÿ" class="table-of-contents__link">Function Component çš„ DefaultProps æ€ä¹ˆå¤„ç†ï¼Ÿ</a></li><li><a href="#ä¸è¦å‘äº†å­ç»„ä»¶" class="table-of-contents__link">ä¸è¦å‘äº†å­ç»„ä»¶</a></li></ul></li><li><a href="#3-æ€»ç»“" class="table-of-contents__link">3. æ€»ç»“</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="https://docusaurus.io/img/oss_logo.png" alt="ç¨‹åºå‘˜è‡ªä¹ å®¤å¼€æº" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="https://docusaurus.io/img/oss_logo.png" alt="ç¨‹åºå‘˜è‡ªä¹ å®¤å¼€æº" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright Â© 2021 ç¨‹åºå‘˜è‡ªä¹ å®¤ <a href="https://beian.miit.gov.cn/" target="_blank">ç²¤ICPå¤‡17131802å·</a></div></div></div></footer></div>
<script src="/assets/js/styles.48fdf49e.js"></script>
<script src="/assets/js/runtime~main.cfc8bc6d.js"></script>
<script src="/assets/js/main.7ffafd13.js"></script>
<script src="/assets/js/1.541d8dcb.js"></script>
<script src="/assets/js/2.581e2f12.js"></script>
<script src="/assets/js/3.dfb6f406.js"></script>
<script src="/assets/js/1be78505.75de0bb5.js"></script>
<script src="/assets/js/314.3ef377ff.js"></script>
<script src="/assets/js/cc953bd4.d7c2bc94.js"></script>
<script src="/assets/js/17896441.b25e6bc3.js"></script>
<script src="/assets/js/0704281e.a09360a8.js"></script>
</body>
</html>